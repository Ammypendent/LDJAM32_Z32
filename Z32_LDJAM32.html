<!DOCTYPE html>
<!--[if lte IE 8]> <html class="lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html> <!--<![endif]-->
<head>
<meta charset="utf-8">
<!--
Made in Twine 1.4.1 (running on Windows 7)
Built on 20 Apr 2015 at 18:01:25, Pacific Daylight Time

Sugarcane is based on:

TiddlyWiki 1.2.39 by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Published under a BSD open source license

Copyright (c) Osmosoft Limited 2005

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the Osmosoft Limited nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.
-->
<title>Sugarcane</title>
<script title="engine">
(function(){

function clone(a){var b={};if(!a||typeof a!="object"){return a}for(var property in a){if(typeof a[property]=="object"){try{b[property]=JSON.parse(JSON.stringify(a[property]));continue}catch(e){}}b[property]=a[property]}return b}function insertElement(a,d,f,c,e){var b=document.createElement(d);if(f){b.id=f}if(c){b.className=c}if(e){insertText(b,e)}if(a){a.appendChild(b)}return b}function insertText(a,b){return a.appendChild(document.createTextNode(b))}function removeChildren(a){while(a.hasChildNodes()){a.removeChild(a.firstChild)}}function findPassageParent(el){while(el&&el!=document.body&&!~el.className.indexOf("passage")){el=el.parentNode}return el==document.body?null:el}function setPageElement(c,b,a){var place;if(place=(typeof c=="string"?document.getElementById(c):c)){removeChildren(place);if(tale.has(b)){new Wikifier(place,tale.get(b).processText())}else{new Wikifier(place,a)}}}function addStyle(b){if(document.createStyleSheet){document.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd","&nbsp;<style>"+b+"</style>")}else{var a=document.createElement("style");a.appendChild(document.createTextNode(b));document.getElementsByTagName("head")[0].appendChild(a)}}function alterCSS(text){var imgPassages=tale.lookup("tags","Twine.image");text=text.replace(/\/\*(?:[^\*]|\*(?!\/))*\*\//g,"");text=text.replace(/:link/g,"[class*=Link]");text=text.replace(/:visited/g,".visitedLink");return text.replace(new RegExp(Wikifier.imageFormatter.lookahead,"gim"),function(m,p1,p2,p3,src){for(var i=0;i<imgPassages.length;i++){if(imgPassages[i].title==src){src=imgPassages[i].text;break}}return"url("+src+")"})}function setTransitionCSS(styleText){styleText=alterCSS(styleText);var style=document.getElementById("transitionCSS");style.styleSheet?(style.styleSheet.cssText=styleText):(style.innerHTML=styleText)}function throwError(a,b,tooltip){if(a){var elem=insertElement(a,"span",null,"marked",b);tooltip&&elem.setAttribute("title",tooltip)}}Math.easeInOut=function(a){return(1-((Math.cos(a*Math.PI)+1)/2))};String.prototype.readMacroParams=function(keepquotes){var exec,re=/(?:\s*)(?:(?:"([^"]*)")|(?:'([^']*)')|(?:\[\[((?:[^\]]|\](?!\]))*)\]\])|([^"'\s]\S*))/mg,params=[];do{var val;exec=re.exec(this);if(exec){if(exec[1]){val=exec[1];keepquotes&&(val='"'+val+'"')}else{if(exec[2]){val=exec[2];keepquotes&&(val="'"+val+"'")}else{if(exec[3]){val=exec[3];keepquotes&&(val='"'+val.replace('"','\\"')+'"')}else{if(exec[4]){val=exec[4]}}}}val&&params.push(val)}}while(exec);return params};String.prototype.readBracketedList=function(){var c,b="\\[\\[([^\\]]+)\\]\\]",a="[^\\s$]+",e="(?:"+b+")|("+a+")",d=new RegExp(e,"mg"),f=[];do{c=d.exec(this);if(c){if(c[1]){f.push(c[1])}else{if(c[2]){f.push(c[2])}}}}while(c);return(f)};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")});String.prototype.unDash=function(){var s=this.split("-");if(s.length>1){for(var t=1;t<s.length;t++){s[t]=s[t].substr(0,1).toUpperCase()+s[t].substr(1)}}return s.join("")};Array.prototype.indexOf||(Array.prototype.indexOf=function(b,d){d=(d==null)?0:d;var a=this.length;for(var c=d;c<a;c++){if(this[c]==b){return c}}return -1});(function(){function t(t){this.message=t}var e=window,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=Error(),t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var o,n,a=0,i=r,c="";e.charAt(0|a)||(i="=",a%1);c+=i.charAt(63&o>>8-8*(a%1))){if(n=e.charCodeAt(a+=0.75),n>255){throw new t()}o=o<<8|n}return c}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),1==e.length%4){throw new t()}for(var o,n,a=0,i=0,c="";n=e.charAt(i++);~n&&(o=a%4?64*o+n:n,a++%4)?c+=String.fromCharCode(255&o>>(6&-2*a)):0){n=r.indexOf(n)}return c})})();var hasTransition="transition" in document.documentElement.style||"-webkit-transition" in document.documentElement.style;function fade(f,c){var h;var e=f.cloneNode(true);var g=(c.fade=="in")?1:-1;f.parentNode.replaceChild(e,f);if(c.fade=="in"){h=0;e.style.visibility="visible"}else{h=1}b(e,h);var a=window.setInterval(d,25);function d(){h+=0.05*g;b(e,Math.easeInOut(h));if(((g==1)&&(h>=1))||((g==-1)&&(h<=0))){f.style.visibility=(c.fade=="in")?"visible":"hidden";if(e.parentNode){e.parentNode.replaceChild(f,e)}window.clearInterval(a);if(c.onComplete){c.onComplete.call(f)}}}function b(k,j){var l=Math.floor(j*100);k.style.zoom=1;k.style.filter="alpha(opacity="+l+")";k.style.opacity=j}}var scrollWindowInterval;function scrollWindowTo(e){var d=window.scrollY?window.scrollY:document.documentElement.scrollTop,g=k(e),c=Math.abs(d-g),b=0,j=(d>g)?-1:1;scrollWindowInterval=window.setInterval(h,25);function h(){b+=0.1;window.scrollTo(0,d+j*(c*Math.easeInOut(b)));if(b>=1){window.clearInterval(scrollWindowInterval)}}function k(o){var p=a(o);var q=p+o.offsetHeight;var l=window.scrollY?window.scrollY:document.documentElement.scrollTop;var m=window.innerHeight?window.innerHeight:document.documentElement.clientHeight;var n=l+m;if(p<l){return p}else{if(q>n){if(o.offsetHeight<m){return(p-(m-o.offsetHeight)+20)}else{return p}}else{return p}}}function a(l){var m=0;while(l.offsetParent){m+=l.offsetTop;l=l.offsetParent}return m}}function delta(old,neu){var vars,ret={};if(old&&neu){for(vars in neu){if(neu[vars]!==old[vars]){ret[vars]=neu[vars]}}}return ret}function History(){this.history=[{passage:null,variables:{}}];this.id=new Date().getTime()+""}History.prototype.encodeHistory=function(b,noVars){var ret=".",vars,type,hist=this.history[b],d=this.history[b+1]?delta(this.history[b+1].variables,hist.variables):hist.variables;function vtob(str){try{return window.btoa(unescape(encodeURIComponent(JSON.stringify(str))))}catch(e){return"0"}}if(!hist.passage||hist.passage.id==null){return""}ret+=hist.passage.id.toString(36);if(noVars){return ret}for(vars in d){type=typeof d[vars];if(type!="function"&&type!="undefined"){ret+="$"+vtob(vars)+","+vtob(d[vars])}}for(vars in hist.linkVars){type=typeof hist.linkVars[vars];if(type!="function"&&type!="undefined"){ret+="["+vtob(vars)+","+vtob(hist.linkVars[vars])}}return ret};History.prototype.decodeHistory=function(str,prev){var name,splits,variable,c,d,ret={variables:clone(prev.variables)||{}},match=/([a-z0-9]+)((?:\$[A-Za-z0-9\+\/=]+,[A-Za-z0-9\+\/=]+)*)((?:\[[A-Za-z0-9\+\/=]+,[A-Za-z0-9\+\/=]+)*)/g.exec(str);function btov(str){try{return JSON.parse(decodeURIComponent(escape(window.atob(str))))}catch(e){return 0}}if(match){name=parseInt(match[1],36);if(!tale.has(name)){return false}if(match[2]){ret.variables||(ret.variables={});splits=match[2].split("$");for(c=0;c<splits.length;c++){variable=splits[c].split(",");d=btov(variable[0]);if(d){ret.variables[d]=btov(variable[1])}}}if(match[3]){ret.linkVars||(ret.linkVars={});splits=match[3].split("[");for(c=0;c<splits.length;c++){variable=splits[c].split(",");d=btov(variable[0]);if(d){ret.linkVars[d]=btov(variable[1])}}}ret.passage=tale.get(name);return ret}};History.prototype.save=function(c){var hist,b,a="";for(b=this.history.length-1;b>=0;b--){hist=this.history[b];if(!hist){break}a+=this.encodeHistory(b)}return"#"+a};History.prototype.restore=function(){var a,b,c,vars;try{if(testplay){this.display(testplay,null,"quietly");return true}if(!window.location.hash||(window.location.hash=="#")){return false}if(window.location.hash.substr(0,2)=="#!"){c=window.location.hash.substr(2).split("_").join(" ");this.display(c,null,"quietly");return true}a=window.location.hash.replace("#","").split(".");for(b=0;b<a.length;b++){vars=this.decodeHistory(a[b],vars||{});if(vars){if(b==a.length-1){vars.variables=clone(this.history[0].variables);for(c in this.history[0].linkVars){vars.variables[c]=clone(this.history[0].linkVars[c])}this.history.unshift(vars);this.display(vars.passage.title,null,"back")}else{this.history.unshift(vars)}}}return true}catch(d){return false}};History.prototype.saveVariables=function(c,el,callback){this.history.unshift({passage:c,variables:clone(this.history[0].variables)});if(typeof callback=="function"){callback.call(el);this.history[1]&&(this.history[1].linkVars=delta(this.history[1].variables,this.history[0].variables))}};var restart=History.prototype.restart=function(){if(typeof window.history.replaceState=="function"){this.pushState(true,window.location.href.replace(/#.*$/,""));window.location.reload()}else{window.location.hash=""}};var version={major:4,minor:1,revision:0,date:new Date("January 1, 2013"),extensions:{}};var testplay,tale,state,prerender={},postrender={},macros=window.macros={};version.extensions.displayMacro={major:2,minor:0,revision:0};macros.display={parameters:[],handler:function(place,macroName,params,parser){var t,j,output,oldDisplayParams,name=parser.fullArgs();if(macroName!="display"){output=macroName;params=name.readMacroParams(true);try{for(j=0;j<params.length;j++){params[j]=eval(Wikifier.parse(params[j]))}}catch(e){throwError(place,"<<"+macroName+" "+name+">> bad argument: "+params[j],parser.fullMatch());return}}else{try{output=eval(name)}catch(e){}if(output==null){if(tale.has(name)){output=name}else{throwError(place,"<<"+macroName+">> bad expression: "+e.message,parser.fullMatch());return}}}if(!output){throwError(place,'"'+name+'" did not evaluate to a passage name',parser.fullMatch())}else{if(!tale.has(output+"")){throwError(place,'The "'+output+'" passage does not exist',parser.fullMatch())}else{oldDisplayParams=this.parameters;this.parameters=params;t=tale.get(output+"");if(t.tags.indexOf("script")>-1){scriptEval(t)}else{new Wikifier(place,t.processText())}this.parameters=oldDisplayParams}}}};version.extensions.actionsMacro={major:1,minor:2,revision:0};macros.actions={handler:function(a,f,g){var v=state.history[0].variables,e=insertElement(a,"ul");if(!v["actions clicked"]){v["actions clicked"]={}}for(var b=0;b<g.length;b++){if(v["actions clicked"][g[b]]){continue}var d=insertElement(e,"li");var c=Wikifier.createInternalLink(d,g[b],(function(link){return function(){state.history[0].variables["actions clicked"][link]=true}}(g[b])));insertText(c,g[b])}}};version.extensions.printMacro={major:1,minor:1,revision:1};macros.print={handler:function(place,macroName,params,parser){try{var args=parser.fullArgs(macroName!="print"),output=eval(args);if(output!=null&&(typeof output!="number"||!isNaN(output))){new Wikifier(place,output.toString())}}catch(e){throwError(place,"<<print>> bad expression: "+e.message,parser.fullMatch())}}};version.extensions.setMacro={major:1,minor:1,revision:0};macros.set={handler:function(a,b,c,parser){macros.set.run(a,parser.fullArgs(),parser)},run:function(a,expression,parser){try{return eval(expression)}catch(e){throwError(a,"bad expression: "+e.message,parser?parser.fullMatch():expression)}}};version.extensions.ifMacros={major:2,minor:0,revision:0};macros["if"]={handler:function(place,macroName,params,parser){var conditions=[],clauses=[],srcOffset=parser.source.indexOf(">>",parser.matchStart)+2,src=parser.source.slice(srcOffset),endPos=-1,currentCond=parser.fullArgs(),currentClause="",t=0,nesting=0;for(var i=0;i<src.length;i++){if(src.substr(i,9)=="<<endif>>"){nesting--;if(nesting<0){endPos=srcOffset+i+9;conditions.push(currentCond.trim());clauses.push(currentClause);break}}if((src.substr(i,6)=="<<else")&&!nesting){conditions.push(currentCond.trim());clauses.push(currentClause);currentClause="";t=src.indexOf(">>",i+6);if(src.substr(i+6,4)==" if "||src.substr(i+6,3)=="if "){currentCond=Wikifier.parse(src.slice(i+9,t))}else{currentCond="true"}i=t+2}if(src.substr(i,5)=="<<if "){nesting++}currentClause+=src.charAt(i)}try{if(endPos!=-1){parser.nextMatch=endPos;for(i=0;i<clauses.length;i++){if(eval(conditions[i])){new Wikifier(place,clauses[i]);break}}}else{throwError(place,"can't find matching endif",parser.fullMatch())}}catch(e){throwError(place,"<<if>> bad condition: "+e.message,!i?parser.fullMatch():"<<else if "+conditions[i]+">>")}}};macros["else"]=macros.elseif=macros.endif={handler:function(){}};version.extensions.rememberMacro={major:2,minor:0,revision:0};macros.remember={handler:function(place,macroName,params,parser){var variable,value,re,match,statement=params.join(" ");macros.set.run(place,parser.fullArgs());if(!window.localStorage){throwError(place,"<<remember>> can't be used "+(window.location.protocol=="file:"?" by local HTML files ":"")+" in this browser.",parser.fullMatch());return}re=new RegExp(Wikifier.textPrimitives.variable,"g");while(match=re.exec(statement)){variable=match[1];value=state.history[0].variables[variable];try{value=JSON.stringify(value)}catch(e){throwError(place,"can't remember $"+variable+" ("+(typeof value)+")",parser.fullMatch());return}window.localStorage[this.prefix+variable]=value}},init:function(){var i,variable,value;if(tale.has("StoryTitle")){this.prefix="Twine."+tale.title+"."}else{this.prefix="Twine.Untitled Story."}for(i in window.localStorage){if(i.indexOf(this.prefix)==0){variable=i.substr(this.prefix.length);value=window.localStorage[i];try{value=JSON.parse(value);state.history[0].variables[variable]=value}catch(e){}}}},expire:null,prefix:null};version.extensions.forgetMacro={major:1,minor:0,revision:0};macros.forget={handler:function(place,macroName,params){var re,match,variable,statement=params.join(" ");re=new RegExp(Wikifier.textPrimitives.variable,"g");while(match=re.exec(statement)){variable=match[1]+"";delete state.history[0].variables[variable];delete window.localStorage[macros.remember.prefix+variable]}}};version.extensions.SilentlyMacro={major:1,minor:1,revision:0};macros.nobr=macros.silently={handler:function(place,macroName,f,parser){var i,h=insertElement(null,"div"),k=parser.source.indexOf(">>",parser.matchStart)+2,a=parser.source.slice(k),d=-1,c="",l=0;for(i=0;i<a.length;i++){if(a.substr(i,macroName.length+7)=="<<end"+macroName+">>"){if(l==0){d=k+i+macroName.length+7;break}else{l--}}else{if(a.substr(i,macroName.length+4)=="<<"+macroName+">>"){l++}}if(macroName=="nobr"&&a.charAt(i)=="\n"){c+="\u200c"}else{c+=a.charAt(i)}}if(d!=-1){new Wikifier(macroName=="nobr"?place:h,c);parser.nextMatch=d}else{throwError(place,"can't find matching end"+macroName,parser.fullMatch())}}};macros.endsilently={handler:function(){}};version.extensions.choiceMacro={major:2,minor:0,revision:0};macros.choice={callback:function(){var i,other,passage=findPassageParent(this);if(passage){other=passage.querySelectorAll(".choice");for(i=0;i<other.length;i++){other[i].outerHTML="<span class=disabled>"+other[i].innerHTML+"</span>"}state.history[0].variables["choice clicked"][passage.id.replace(/\|[^\]]*$/,"")]=true}},handler:function(A,C,D,parser){var link,id,match,text=D[1]||D[0].split("|")[0],passage=findPassageParent(A);if(!passage){throwError(A,"<<"+C+">> can't be used here.",parser.fullMatch());return}id=(passage&&passage.id.replace(/\|[^\]]*$/,""));if(id&&(state.history[0].variables["choice clicked"]||(state.history[0].variables["choice clicked"]={}))[id]){insertElement(A,"span",null,"disabled",text)}else{match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullArgs());if(match){link=Wikifier.linkFormatter.makeLink(A,match,this.callback)}else{link=Wikifier.linkFormatter.makeLink(A,[0,text,D[0]],this.callback)}link.className+=" "+C}}};version.extensions.backMacro={major:2,minor:0,revision:0};macros.back={labeltext:"&#171; back",handler:function(a,b,e,parser){var labelParam,c,el,labeltouse=this.labeltext,steps=1,stepsParam=e.indexOf("steps"),stepsParam2="";if(stepsParam>0){stepsParam2=e[stepsParam-1];if(stepsParam2[0]=="$"){try{stepsParam2=eval(Wikifier.parse(stepsParam2))}catch(r){throwError(a,"<<"+b+">> bad expression: "+r.message,parser.fullMatch());return}}steps=+stepsParam2;if(steps>=state.history.length-1){steps=state.history.length-2}e.splice(stepsParam-1,2)}labelParam=e.indexOf("label");if(labelParam>-1){if(!e[labelParam+1]){throwError(a,e[labelParam]+" keyword needs an additional label parameter",parser.fullMatch());return}labeltouse=e[labelParam+1];if(e[labelParam]=="labeldefault"){this.labeltext=labeltouse}e.splice(labelParam,2)}if(stepsParam<=0){if(e[0]){if(e[0].charAt(0)=="$"){try{e=eval(Wikifier.parse(e[0]))}catch(r){throwError(a,"<<"+b+">> bad expression: "+r.message,parser.fullMatch());return}}else{e=e[0]}if(!tale.has(e)){throwError(a,'The "'+e+'" passage does not exist',parser.fullMatch());return}for(c=0;c<state.history.length;c++){if(state.history[c].passage.title==e){steps=c;break}}}}el=document.createElement("a");el.className=b;el.onclick=(function(b){return function(){return macros.back.onclick(b=="back",steps,el)}}(b));el.innerHTML=labeltouse;a.appendChild(el)}};version.extensions.returnMacro={major:2,minor:0,revision:0};macros["return"]={labeltext:"&#171; return",handler:function(a,b,e){macros.back.handler.call(this,a,b,e)}};version.extensions.textInputMacro={major:2,minor:0,revision:0};macros.checkbox=macros.radio=macros.textinput={handler:function(A,C,D,parser){var match,class_=C.replace("input","Input"),q=A.querySelectorAll("input"),id=class_+"|"+((q&&q.length)||0);input=insertElement(null,"input",id,class_);input.name=D[0];input.type=C.replace("input","");A.appendChild(input);if(C=="textinput"&&D[1]){match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullArgs());if(match){Wikifier.linkFormatter.makeLink(A,match,macros.button.callback,"button")}else{Wikifier.linkFormatter.makeLink(A,[0,(D[2]||D[1]),D[1]],macros.button.callback,"button")}}else{if((C=="radio"||C=="checkbox")&&D[1]){input.value=D[1];insertElement(A,"label","","",D[1]).setAttribute("for",id);if(D[2]){insertElement(A,"br");D.splice(1,1);macros[C].handler(A,C,D)}}}}};version.extensions.buttonMacro={major:1,minor:0,revision:0};macros.button={callback:function(){var el=findPassageParent(this);if(el){var inputs=el.querySelectorAll("input");for(i=0;i<inputs.length;i++){if(inputs[i].type!="checkbox"&&(inputs[i].type!="radio"||inputs[i].checked)){macros.set.run(null,Wikifier.parse(inputs[i].name+' = "'+inputs[i].value.replace(/"/g,'\\"')+'"'))}else{if(inputs[i].type=="checkbox"&&inputs[i].checked){macros.set.run(null,Wikifier.parse(inputs[i].name+" = [].concat("+inputs[i].name+" || []);"));macros.set.run(null,Wikifier.parse(inputs[i].name+'.push("'+inputs[i].value.replace(/"/g,'\\"')+'")'))}}}}},handler:function(A,C,D,parser){var link,match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullArgs());if(match){Wikifier.linkFormatter.makeLink(A,match,this.callback,"button")}else{Wikifier.linkFormatter.makeLink(A,[0,D[1]||D[0],D[0]],this.callback,"button")}}};function Passage(c,b,a,ofunc,okey){var t,k;this.title=c;if(b){this.id=a;if(ofunc!=null&&typeof ofunc=="function"&&okey!=null){t=b.firstChild?b.firstChild.nodeValue:"";this.initialText=this.text=ofunc(Passage.unescapeLineBreaks(t),okey);this.tags=b.getAttribute("tags");if(typeof this.tags=="string"){this.tags=ofunc(this.tags,okey);this.tags=this.tags.readBracketedList()}else{this.tags=[]}}else{this.initialText=this.text=Passage.unescapeLineBreaks(b.firstChild?b.firstChild.nodeValue:"");this.tags=b.getAttribute("tags");if(typeof this.tags=="string"){this.tags=this.tags.readBracketedList()}else{this.tags=[]}}if(!~(this.tags.indexOf("Twine.image"))){this.preloadImages()}}else{this.initialText=this.text="@@This passage does not exist: "+c+"@@";this.tags=[]}}Passage.prototype.preloadImages=function(){var u="s*['\"]?([^\"']+.(jpe?g|a?png|gif|bmp|webp|svg))['\"]?s*",k=function(c,e){var i,d;do{d=c.exec(this.initialText);if(d){i=new Image();i.src=d[e]}}while(d);return k};k.call(this,new RegExp(Wikifier.imageFormatter.lookahead.replace("[^\\[\\]\\|]+",u),"mg"),4).call(this,new RegExp("url("+u+")","mig"),1).call(this,new RegExp("srcs*="+u,"mig"),1)};Passage.unescapeLineBreaks=function(a){if(a&&typeof a=="string"){return a.replace(/\\n/mg,"\n").replace(/\\t/mg,"\t").replace(/\\s/mg,"\\").replace(/\\/mg,"\\").replace(/\r/mg,"")}else{return""}};Passage.prototype.setTags=function(b){var t=this.tags!=null&&this.tags.length?this.tags.join(" "):"";if(t){b.setAttribute("data-tags",this.tags.join(" "))}document.body.setAttribute("data-tags",t)};Passage.prototype.processText=function(){var ret=this.text;if(~this.tags.indexOf("nobr")){ret=ret.replace(/\n/g,"\u200c")}if(~this.tags.indexOf("Twine.image")){ret="[img["+ret+"]]"}return ret};function Tale(){var a,b,c,lines,i,kv,ns,nsc,nope,settings=this.storysettings={lookup:function(a){return !~["0","off","false"].indexOf((this[a]+""))}},tiddlerTitle="";function deswap(t,k){var i,c,p,p1,up,r="";for(i=0;i<t.length;i++){c=t.charAt(i);up=(c==c.toUpperCase());p=k.indexOf(c.toLowerCase());if(p>-1){p1=p+(p%2==0?1:-1);if(p1>=k.length){p1=p}c=k.charAt(p1);up&&(c=c.toUpperCase())}r=r+c}return r}this.passages={};if(document.normalize){document.normalize()}a=document.getElementById("storeArea").children;for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&c.getAttribute("tiddler")=="StorySettings"){lines=new Passage("StorySettings",c,0,null,null).text.split("\n");for(i in lines){if(typeof lines[i]=="string"&&lines[i].indexOf(":")>-1){kv=lines[i].toLowerCase().split(":");kv[0]=kv[0].replace(/^\s+|\s+$/g,"");kv[1]=kv[1].replace(/^\s+|\s+$/g,"");if(kv[0]!="lookup"){settings[kv[0]]=kv[1]}}}}}if(settings.obfuscate=="swap"&&settings.obfuscatekey){ns="";nope=':\\"n0';if(settings.obfuscatekey=="rot13"){settings.obfuscatekey="anbocpdqerfsgthuivjwkxlymz"}for(i=0;i<settings.obfuscatekey.length;i++){nsc=settings.obfuscatekey[i];if(ns.indexOf(nsc)==-1&&nope.indexOf(nsc)==-1){ns=ns+nsc}}settings.obfuscatekey=ns;for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&(tiddlerTitle=c.getAttribute("tiddler"))){if(tiddlerTitle!="StorySettings"){tiddlerTitle=deswap(tiddlerTitle,settings.obfuscatekey)}this.passages[tiddlerTitle]=new Passage(tiddlerTitle,c,b+1,deswap,settings.obfuscatekey)}}}else{for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&(tiddlerTitle=c.getAttribute("tiddler"))){this.passages[tiddlerTitle]=new Passage(tiddlerTitle,c,b,null,null)}}}}Tale.prototype.has=function(a){if(typeof a=="string"){return(this.passages[a]!=null)}else{for(var i in this.passages){if(this.passages[i].id==a){return true}}return false}};Tale.prototype.get=function(a){if(typeof a=="string"){return this.passages[a]||new Passage(a)}else{for(var i in this.passages){if(this.passages[i].id==a){return this.passages[i]}}}};Tale.prototype.lookup=function(h,g,a){var d=[];for(var c in this.passages){var f=this.passages[c];for(var b=0;b<f[h].length;b++){if(f[h][b]==g){d.push(f)}}}if(!a){a="title"}d.sort(function(k,j){if(k[a]==j[a]){return(0)}else{return(k[a]<j[a])?-1:+1}});return d};Tale.prototype.canUndo=function(){return this.storysettings.lookup("undo")};Tale.prototype.forEachStylesheet=function(tags,callback){var passage,i;tags=tags||[];if(typeof callback!="function"){return}for(passage in this.passages){passage=tale.passages[passage];if(passage&&~passage.tags.indexOf("stylesheet")){for(i=0;i<tags.length;i++){if(~passage.tags.indexOf(tags[i])){callback(passage);break}}}}};Tale.prototype.setPageElements=function(){var storyTitle,defaultTitle="LD Z32";setPageElement("storyTitle","StoryTitle",defaultTitle);storyTitle=document.getElementById("storyTitle");document.title=this.title=(storyTitle&&(storyTitle.textContent||storyTitle.innerText))||defaultTitle;setPageElement("storySubtitle","StorySubtitle","");if(tale.has("StoryAuthor")){setPageElement("titleSeparator",null,"\n");setPageElement("storyAuthor","StoryAuthor","")}if(tale.has("StoryMenu")){document.getElementById("storyMenu").style.display="block";setPageElement("storyMenu","StoryMenu","")}};function Wikifier(place,source){this.source=source;this.output=place;this.nextMatch=0;this.assembleFormatterMatches(Wikifier.formatters);this.subWikify(this.output)}Wikifier.prototype.assembleFormatterMatches=function(formatters){this.formatters=[];var pattern=[];for(var n=0;n<formatters.length;n++){pattern.push("("+formatters[n].match+")");this.formatters.push(formatters[n])}this.formatterRegExp=new RegExp(pattern.join("|"),"mg")};Wikifier.prototype.subWikify=function(output,terminator){var terminatorMatch,formatterMatch,oldOutput=this.output;this.output=output;var terminatorRegExp=terminator?new RegExp("("+terminator+")","mg"):null;do{this.formatterRegExp.lastIndex=this.nextMatch;if(terminatorRegExp){terminatorRegExp.lastIndex=this.nextMatch}formatterMatch=this.formatterRegExp.exec(this.source);terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null;if(terminatorMatch&&(!formatterMatch||terminatorMatch.index<=formatterMatch.index)){if(terminatorMatch.index>this.nextMatch){this.outputText(this.output,this.nextMatch,terminatorMatch.index)}this.matchStart=terminatorMatch.index;this.matchLength=terminatorMatch[1].length;this.matchText=terminatorMatch[1];this.nextMatch=terminatorMatch.index+terminatorMatch[1].length;this.output=oldOutput;return}else{if(formatterMatch){if(formatterMatch.index>this.nextMatch){this.outputText(this.output,this.nextMatch,formatterMatch.index)}this.matchStart=formatterMatch.index;this.matchLength=formatterMatch[0].length;this.matchText=formatterMatch[0];this.nextMatch=this.formatterRegExp.lastIndex;var matchingFormatter=-1;for(var t=1;t<formatterMatch.length;t++){if(formatterMatch[t]){matchingFormatter=t-1;break}}if(matchingFormatter!=-1){this.formatters[matchingFormatter].handler(this)}}}}while(terminatorMatch||formatterMatch);if(this.nextMatch<this.source.length){this.outputText(this.output,this.nextMatch,this.source.length);this.nextMatch=this.source.length}this.output=oldOutput};Wikifier.prototype.outputText=function(place,startPos,endPos){insertText(place,this.source.substring(startPos,endPos))};Wikifier.prototype.fullMatch=function(){return this.source.slice(this.matchStart,this.source.indexOf(">>",this.matchStart)+2)};Wikifier.prototype.fullArgs=function(includeName){var source=this.source.replace(/\u200c/g," "),endPos=source.indexOf(">>",this.matchStart),startPos=source.indexOf(includeName?"<<":" ",this.matchStart);if(!~startPos||!~endPos||endPos<=startPos){return""}return Wikifier.parse(source.slice(startPos+(includeName?2:1),endPos).trim())};Wikifier.parse=function(input){var m,re,b=input,found=[],g="(?=(?:[^\"'\\\\]*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"))*[^'\"]*$)";function alter(from,to){return b.replace(new RegExp(from+g,"gi"),to)}re=new RegExp(Wikifier.textPrimitives.variable,"gi");while(m=re.exec(input)){if(!~found.indexOf(m[0])){b=m[0]+" == null && ("+m[0]+" = 0);"+b;found.push(m[0])}}b=alter(Wikifier.textPrimitives.variable,"state.history[0].variables.$1");b=alter("\\beq\\b"," == ");b=alter("\\bneq\\b"," != ");b=alter("\\bgt\\b"," > ");b=alter("\\bgte\\b"," >= ");b=alter("\\blt\\b"," < ");b=alter("\\blte\\b"," <= ");b=alter("\\band\\b"," && ");b=alter("\\bor\\b"," || ");b=alter("\\bnot\\b"," ! ");b=alter("\\bis\\b"," == ");b=alter("\\bto\\b"," = ");return b};Wikifier.formatHelpers={charFormatHelper:function(a){var b=insertElement(a.output,this.element);a.subWikify(b,this.terminator)},inlineCssHelper:function(w){var s,v,lookaheadMatch,gotMatch,styles=[],lookahead="(?:("+Wikifier.textPrimitives.anyLetter+"+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:("+Wikifier.textPrimitives.anyLetter+"+):([^;\\|\\n]+);)",lookaheadRegExp=new RegExp(lookahead,"mg"),hadStyle=false;do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source);gotMatch=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(gotMatch){hadStyle=true;if(lookaheadMatch[1]){s=lookaheadMatch[1].unDash();v=lookaheadMatch[2]}else{s=lookaheadMatch[3].unDash();v=lookaheadMatch[4]}switch(s){case"bgcolor":s="backgroundColor";break;case"float":s="cssFloat";break}styles.push({style:s,value:v});w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}while(gotMatch);return styles},monospacedByLineHelper:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var text=lookaheadMatch[1];if(navigator.userAgent.indexOf("msie")!=-1&&navigator.userAgent.indexOf("opera")==-1){text=text.replace(/\n/g,"\r")}var e=insertElement(w.output,"pre",null,null,text);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}};Wikifier.formatters=[{name:"table",match:"^\\|(?:[^\\n]*)\\|(?:[fhc]?)$",lookahead:"^\\|([^\\n]*)\\|([fhc]?)$",rowTerminator:"\\|(?:[fhc]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[fhc]?$\\n?)",cellTerminator:"(?:\\x20*)\\|",rowTypes:{"c":"caption","h":"thead","":"tbody","f":"tfoot"},handler:function(w){var rowContainer,rowElement,lookaheadMatch,matched,table=insertElement(w.output,"table"),lookaheadRegExp=new RegExp(this.lookahead,"mg"),currRowType=null,nextRowType,prevColumns=[],rowCount=0;w.nextMatch=w.matchStart;do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source),matched=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(matched){nextRowType=lookaheadMatch[2];if(nextRowType!=currRowType){rowContainer=insertElement(table,this.rowTypes[nextRowType])}currRowType=nextRowType;if(currRowType=="c"){if(rowCount==0){rowContainer.setAttribute("align","top")}else{rowContainer.setAttribute("align","bottom")}w.nextMatch=w.nextMatch+1;w.subWikify(rowContainer,this.rowTerminator)}else{rowElement=insertElement(rowContainer,"tr");this.rowHandler(w,rowElement,prevColumns)}rowCount++}}while(matched)},rowHandler:function(w,e,prevColumns){var cellMatch,matched,col=0,currColCount=1,cellRegExp=new RegExp(this.cellPattern,"mg");do{cellRegExp.lastIndex=w.nextMatch;cellMatch=cellRegExp.exec(w.source);matched=cellMatch&&cellMatch.index==w.nextMatch;if(matched){if(cellMatch[1]=="~"){var last=prevColumns[col];if(last){last.rowCount++;last.element.setAttribute("rowSpan",last.rowCount);last.element.setAttribute("rowspan",last.rowCount);last.element.valign="center"}w.nextMatch=cellMatch.index+cellMatch[0].length-1}else{if(cellMatch[1]==">"){currColCount++;w.nextMatch=cellMatch.index+cellMatch[0].length-1}else{if(cellMatch[2]){w.nextMatch=cellMatch.index+cellMatch[0].length;break}else{var spaceLeft=false,spaceRight=false,lastColCount,lastColElement,styles,cell,t;w.nextMatch++;styles=Wikifier.formatHelpers.inlineCssHelper(w);while(w.source.substr(w.nextMatch,1)==" "){spaceLeft=true;w.nextMatch++}if(w.source.substr(w.nextMatch,1)=="!"){cell=insertElement(e,"th");w.nextMatch++}else{cell=insertElement(e,"td")}prevColumns[col]={rowCount:1,element:cell};lastColCount=1;lastColElement=cell;if(currColCount>1){cell.setAttribute("colSpan",currColCount);cell.setAttribute("colspan",currColCount);currColCount=1}for(t=0;t<styles.length;t++){cell.style[styles[t].style]=styles[t].value}w.subWikify(cell,this.cellTerminator);if(w.matchText.substr(w.matchText.length-2,1)==" "){spaceRight=true}if(spaceLeft&&spaceRight){cell.align="center"}else{if(spaceLeft){cell.align="right"}else{if(spaceRight){cell.align="left"}}}w.nextMatch=w.nextMatch-1}}}col++}}while(matched)}},{name:"rule",match:"^----$\\n?",handler:function(w){insertElement(w.output,"hr")}},{name:"emdash",match:"--",handler:function(a){insertElement(a.output,"span",null,"char "+String.fromCharCode(8212),String.fromCharCode(8212))}},{name:"heading",match:"^!{1,5}",terminator:"\\n",handler:function(w){var e=insertElement(w.output,"h"+w.matchLength);w.subWikify(e,this.terminator)}},{name:"monospacedByLine",match:"^\\{\\{\\{\\n",lookahead:"^\\{\\{\\{\\n((?:^[^\\n]*\\n)+?)(^\\}\\}\\}$\\n?)",handler:Wikifier.formatHelpers.monospacedByLineHelper},{name:"monospacedByLineForPlugin",match:"^//\\{\\{\\{\\n",lookahead:"^//\\{\\{\\{\\n\\n*((?:^[^\\n]*\\n)+?)(\\n*^//\\}\\}\\}$\\n?)",handler:Wikifier.formatHelpers.monospacedByLineHelper},{name:"wikifyCommentForPlugin",match:"^/\\*\\*\\*\\n",terminator:"^\\*\\*\\*/\\n",handler:function(w){w.subWikify(w.output,this.terminator)}},{name:"quoteByBlock",match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){var e=insertElement(w.output,"blockquote");w.subWikify(e,this.terminator)}},{name:"quoteByLine",match:"^>+",terminator:"\\n",element:"blockquote",handler:function(w){var lookaheadRegExp=new RegExp(this.match,"mg");var placeStack=[w.output];var currLevel=0;var newLevel=w.matchLength;var t;do{if(newLevel>currLevel){for(t=currLevel;t<newLevel;t++){placeStack.push(insertElement(placeStack[placeStack.length-1],this.element))}}else{if(newLevel<currLevel){for(t=currLevel;t>newLevel;t--){placeStack.pop()}}}currLevel=newLevel;w.subWikify(placeStack[placeStack.length-1],this.terminator);lookaheadRegExp.lastIndex=w.nextMatch;var lookaheadMatch=lookaheadRegExp.exec(w.source);var matched=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(matched){newLevel=lookaheadMatch[0].length;w.nextMatch+=lookaheadMatch[0].length;insertElement(placeStack[placeStack.length-1],"br")}}while(matched)}},{name:"list",match:"^(?:(?:\\*+)|(?:#+))",lookahead:"^(?:(\\*+)|(#+))",terminator:"\\n",outerElement:"ul",itemElement:"li",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");w.nextMatch=w.matchStart;var placeStack=[w.output];var currType=null,newType;var currLevel=0,newLevel;var t;do{lookaheadRegExp.lastIndex=w.nextMatch;var lookaheadMatch=lookaheadRegExp.exec(w.source);var matched=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(matched){if(lookaheadMatch[1]){newType="ul"}if(lookaheadMatch[2]){newType="ol"}newLevel=lookaheadMatch[0].length;w.nextMatch+=lookaheadMatch[0].length;if(newLevel>currLevel){for(t=currLevel;t<newLevel;t++){placeStack.push(insertElement(placeStack[placeStack.length-1],newType))}}else{if(newLevel<currLevel){for(t=currLevel;t>newLevel;t--){placeStack.pop()}}else{if(newLevel==currLevel&&newType!=currType){placeStack.pop();placeStack.push(insertElement(placeStack[placeStack.length-1],newType))}}}currLevel=newLevel;currType=newType;var e=insertElement(placeStack[placeStack.length-1],"li");w.subWikify(e,this.terminator)}}while(matched)}},(Wikifier.urlFormatter={name:"urlLink",match:"(?:http|https|mailto|javascript|ftp|data):[^\\s'\"]+(?:/|\\b)",handler:function(w){var e=Wikifier.createExternalLink(w.output,w.matchText);w.outputText(e,w.matchStart,w.nextMatch)}}),(Wikifier.linkFormatter={name:"prettyLink",match:"\\[\\[",lookahead:"\\[\\[([^\\|\\]]*?)(?:\\|(.*?))?\\](?:\\[(.*?)])?\\]",makeInternalOrExternal:function(out,title,callback,type){if(title&&!tale.has(title)&&(title.match(Wikifier.urlFormatter.match,"g")||~title.search(/[\.\\\/#]/))){return Wikifier.createExternalLink(out,title,callback,type)}else{return Wikifier.createInternalLink(out,title,callback,type)}},makeCallback:function(out,code,callback){return function(){macros.set.run(out,Wikifier.parse(code));typeof callback=="function"&&callback.call(this)}},makeLink:function(out,match,callback2,type){var link,title,callback;if(match[3]){callback=this.makeCallback(out,match[3],callback2)}else{typeof callback2=="function"&&(callback=callback2)}title=Wikifier.parsePassageTitle(match[2]||match[1]);link=this.makeInternalOrExternal(out,title,callback,type);setPageElement(link,null,match[2]?match[1]:title);return link},handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){this.makeLink(w.output,lookaheadMatch);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}}),(Wikifier.imageFormatter={name:"image",match:"\\[(?:[<]{0,1})(?:[>]{0,1})[Ii][Mm][Gg]\\[",lookahead:"\\[([<]?)(>?)img\\[(?:([^\\|\\]]+)\\|)?([^\\[\\]\\|]+)\\](?:\\[([^\\]]*)\\]?)?(\\])",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mig");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var e=w.output,title=Wikifier.parsePassageTitle(lookaheadMatch[5]);if(title){e=Wikifier.linkFormatter.makeInternalOrExternal(w.output,title)}var img=insertElement(e,"img");if(lookaheadMatch[1]){img.align="left"}else{if(lookaheadMatch[2]){img.align="right"}}if(lookaheadMatch[3]){img.title=lookaheadMatch[3]}img.src=lookaheadMatch[4];var imgPassages=tale.lookup("tags","Twine.image");for(var j=0;j<imgPassages.length;j++){if(imgPassages[j].title==lookaheadMatch[4]){img.src=imgPassages[j].text;break}}w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}}),{name:"macro",match:"<<",lookahead:"<<([^>\\s]+)(?:\\s*)((?:[^>]|>(?!>))*)>>",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source.replace(/\u200c/g,"\n"));if(lookaheadMatch&&lookaheadMatch.index==w.matchStart&&lookaheadMatch[1]){var params=lookaheadMatch[2].readMacroParams();w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length;var name=lookaheadMatch[1];try{var macro=macros[name];if(macro&&macro.handler){macro.handler(w.output,name,params,w)}else{if(name[0]=="$"){macros.print.handler(w.output,name,[name].concat(params),w)}else{if(tale.has(name)){macros.display.handler(w.output,name,[name].concat(params),w)}else{throwError(w.output,"Macro not found: "+name,w.fullMatch())}}}}catch(e){throwError(w.output,"Error executing macro "+name+": "+e.toString(),w.fullMatch())}}}},{name:"html",match:"<html>",lookahead:"<html>((?:.|\\n)*?)</html>",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var e=insertElement(w.output,"span");e.innerHTML=lookaheadMatch[1];w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},{name:"commentByBlock",match:"/%",lookahead:"/%((?:.|\\n)*?)%/",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},{name:"boldByChar",match:"''",terminator:"''",element:"strong",handler:Wikifier.formatHelpers.charFormatHelper},{name:"strikeByChar",match:"==",terminator:"==",element:"strike",handler:Wikifier.formatHelpers.charFormatHelper},{name:"underlineByChar",match:"__",terminator:"__",element:"u",handler:Wikifier.formatHelpers.charFormatHelper},{name:"italicByChar",match:"//",terminator:"//",element:"em",handler:Wikifier.formatHelpers.charFormatHelper},{name:"subscriptByChar",match:"~~",terminator:"~~",element:"sub",handler:Wikifier.formatHelpers.charFormatHelper},{name:"superscriptByChar",match:"\\^\\^",terminator:"\\^\\^",element:"sup",handler:Wikifier.formatHelpers.charFormatHelper},{name:"monospacedByChar",match:"\\{\\{\\{",lookahead:"\\{\\{\\{((?:.|\\n)*?)\\}\\}\\}",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var e=insertElement(w.output,"code",null,null,lookaheadMatch[1]);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},{name:"styleByChar",match:"@@",terminator:"@@",lookahead:"(?:([^\\(@]+)\\(([^\\)]+)(?:\\):))|(?:([^:@]+):([^;]+);)",handler:function(w){var e=insertElement(w.output,"span",null,null,null);var styles=Wikifier.formatHelpers.inlineCssHelper(w);if(styles.length==0){e.className="marked"}else{for(var t=0;t<styles.length;t++){e.style[styles[t].style]=styles[t].value}}w.subWikify(e,this.terminator)}},{name:"lineBreak",match:"\\n",handler:function(w){insertElement(w.output,"br")}},{name:"continuedLine",match:"\\\\\\s*?\\n",handler:function(a){a.nextMatch=a.matchStart+2}},{name:"htmltag",match:"<\\w+(?:(?:\\s+\\w+(?:\\s*=\\s*(?:\".*?\"|'.*?'|[^'\">\\s]+))?)+\\s*|\\s*)\\/?>",tagname:"<(\\w+)",voids:["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],tableElems:["table","thead","tbody","tfoot","th","tr","td","colgroup","col","caption","figcaption"],cleanupTables:function(e){var i,name,elems=[].slice.call(e.children);for(i=0;i<elems.length;i++){if(elems[i].tagName){name=elems[i].tagName.toLowerCase();if(this.tableElems.indexOf(name)==-1){elems[i].outerHTML=""}else{if(["col","caption","figcaption","td","th"].indexOf(name)==-1){this.cleanupTables.call(this,elems[i])}}}}},handler:function(a){var e,isvoid,lookaheadRegExp,lookaheadMatch,lookahead,re=new RegExp(this.tagname).exec(a.matchText),tn=re&&re[1];if(tn&&tn.toLowerCase()!="html"){lookahead="<\\/\\s*"+tn+"\\s*>";isvoid=(this.voids.indexOf(tn.toLowerCase())!=-1);lookaheadRegExp=new RegExp(lookahead,"mg");lookaheadRegExp.lastIndex=a.matchStart;lookaheadMatch=lookaheadRegExp.exec(a.source);if(lookaheadMatch||isvoid){e=document.createElement(a.output.tagName);e.innerHTML=a.matchText;while(e.firstChild){e=e.firstChild}if(!isvoid){a.subWikify(e,lookahead)}if(e.tagName.toLowerCase()=="table"){this.cleanupTables.call(this,e)}a.output.appendChild(e)}else{throwError(a.output,"HTML tag '"+tn+"' wasn't closed.",a.matchText)}}}},{name:"char",match:".",handler:function(a){insertElement(a.output,"span",null,"char "+(a.matchText==" "?"space":a.matchText=="\t"?"tab":a.matchText),a.matchText)}}];Wikifier.parsePassageTitle=function(title){if(title&&!tale.has(title)){try{title=(eval(this.parse(title))||title)+""}catch(e){}}return title};Wikifier.linkFunction=function(title,el,callback){return function(){if(state.rewindTo){var passage=findPassageParent(el);if(passage&&passage.parentNode.lastChild!=passage){state.rewindTo(passage,true)}}state.display(title,el,null,callback)}};Wikifier.createInternalLink=function(place,title,callback,type){var tag=(type=="button"?"button":"a"),suffix=(type=="button"?"Button":"Link"),el=insertElement(place,tag,title);if(tale.has(title)){el.className="internal"+suffix;if(visited(title)){el.className+=" visited"+suffix}}else{el.className="broken"+suffix}el.onclick=Wikifier.linkFunction(title,el,callback);if(place){place.appendChild(el)}return el};Wikifier.createExternalLink=function(place,url,callback,type){var tag=(type=="button"?"button":"a"),el=insertElement(place,tag);el.href=url;el.className="external"+(type=="button"?"Button":"Link");el.target="_blank";if(typeof callback=="function"){el.onclick=callback}if(place){place.appendChild(el)}return el};if(!((new RegExp("[\u0150\u0170]","g")).test("\u0150"))){Wikifier.textPrimitives={upperLetter:"[A-Z\u00c0-\u00de]",lowerLetter:"[a-z\u00df-\u00ff_0-9\\-]",anyLetter:"[A-Za-z\u00c0-\u00de\u00df-\u00ff_0-9\\-]"}}else{Wikifier.textPrimitives={upperLetter:"[A-Z\u00c0-\u00de\u0150\u0170]",lowerLetter:"[a-z\u00df-\u00ff_0-9\\-\u0151\u0171]",anyLetter:"[A-Za-z\u00c0-\u00de\u00df-\u00ff_0-9\\-\u0150\u0170\u0151\u0171]"}}Wikifier.textPrimitives.variable="\\$((?:"+Wikifier.textPrimitives.anyLetter.replace("\\-","\\.")+"*"+Wikifier.textPrimitives.anyLetter.replace("0-9\\-","\\.")+"+"+Wikifier.textPrimitives.anyLetter.replace("\\-","\\.")+"*)+)";function visited(e){var ret=0,i=0;if(!state){return 0}e=e||state.history[0].passage.title;if(arguments.length>1){for(ret=state.history.length;i<arguments.length;i++){ret=Math.min(ret,visited(arguments[i]))}}else{for(;i<state.history.length&&state.history[i].passage;i++){if(e==state.history[i].passage.title){ret++}}}return ret}function visitedTag(){var i,j,k,ret=0;if(!state){return 0}for(i=0;i<state.history.length&&state.history[i].passage;i++){for(j=0;j<state.history.length&&state.history[i].passage;i++){for(k=0;k<arguments.length||void ret++;k++){if(state.history[i].passage.tags.indexOf(arguments[k])==-1){break}}}}return ret}function turns(){return state.history.length-1}function passage(){return state.history[0].passage.title}function tags(e){var ret=[],i=0;if(!state){return 0}e=e||state.history[0].passage.title;if(arguments.length>1){for(i=arguments.length-1;i>=1;i--){ret=ret.concat(tags(arguments[i]))}}ret=ret.concat(tale.get(e).tags);return ret}function previous(){if(state&&state.history[1]){for(var d=1;d<state.history.length&&state.history[d].passage;d++){if(state.history[d].passage.title!=state.history[0].passage.title){return state.history[d].passage.title}}}return""}function either(){return arguments[~~(Math.random()*arguments.length)]}function parameter(n){n=n||0;if(macros.display.parameters[n]){return macros.display.parameters[n]}return 0}function scriptEval(s){try{eval(s.text)}catch(e){alert("There is a technical problem with this story ("+s.title+": "+e.message+")."+softErrorMessage)}}var softErrorMessage=" You may be able to continue playing, but parts of the story may not work properly.";window.onerror=function(e){alert("Sorry to interrupt, but this story's code has got itself in a mess ("+e+")."+softErrorMessage);window.onerror=null};var $;function main(){$=window.$||function(a){return(typeof a=="string"?document.getElementById(a):a)};var imgs,scripts,macro,style,styleText="",i,passages=document.getElementById("passages");function sanityCheck(thing){if(!sanityCheck.display){if(History.prototype.display.length<4&&!~History.prototype.display.toString().indexOf("arguments")){alert("NOTE: The "+thing+" contains a function that patches History.prototype.display, but takes the wrong number of arguments."+softErrorMessage)}sanityCheck.display=true}}if(!window.JSON||!document.querySelector){return(passages.innerHTML="This story requires a newer web browser. Sorry.")}else{passages.innerHTML=""}tale=window.tale=new Tale();if(~document.documentElement.className.indexOf("lt-ie9")){imgs=tale.lookup("tags","Twine.image");for(i=0;i<imgs.length;i++){if(imgs[i].text.length>=32768){alert("NOTE: This story's HTML file contains embedded images that may be too large for this browser to display."+softErrorMessage);break}}}scripts=tale.lookup("tags","script");for(i=0;i<scripts.length;i++){scriptEval(scripts[i]);sanityCheck('script passage "'+scripts[i].title+'"')}state=window.state=new History();for(i in macros){macro=macros[i];if(typeof macro.init=="function"){macro.init();sanityCheck('init() of the custom macro "'+i+'"')}}style=document.getElementById("storyCSS");for(i in tale.passages){i=tale.passages[i];if(i.tags+""=="stylesheet"){styleText+=alterCSS(i.text)}else{if(i.tags.length==2&&i.tags.indexOf("transition")>-1&&i.tags.indexOf("stylesheet")>-1){setTransitionCSS(i.text)}}}style.styleSheet?(style.styleSheet.cssText=styleText):(style.innerHTML=styleText);state.init()};

var hasPushState=!!window.history&&(typeof window.history.pushState=="function");Tale.prototype.canBookmark=function(){return this.canUndo()&&(this.storysettings.lookup("bookmark")||!hasPushState)};History.prototype.init=function(){var a=this;if(!this.restore()){this.display("Start",null)}if(!hasPushState){this.hash=window.location.hash;this.interval=window.setInterval(function(){a.watchHash()},250)}};hasPushState&&(History.prototype.pushState=function(replace,uri){window.history[replace?"replaceState":"pushState"]({id:this.id,length:this.history.length},document.title,uri)});History.prototype.display=function(title,source,type,callback){var e,bookmarkhref,c=tale.get(title),p=document.getElementById("passages");if(c==null){return}if(type!="back"){this.saveVariables(c,source,callback);if(hasPushState&&tale.canUndo()){try{sessionStorage.setItem("history"+this.id,JSON.stringify(this.history));this.pushState(this.history.length<=2&&window.history.state=="")}catch(e){alert("Your browser couldn't save the state of the game.\n"+"You may continue playing, but it will no longer be possible to undo moves from here on in.");tale.storysettings.undo="off"}}}bookmarkhref=this.save();e=c.render();if(type!="quietly"){if(hasTransition){for(var i=0;i<p.childNodes.length;i+=1){var q=p.childNodes[i];q.classList.add("transition-out");setTimeout((function(a){return function(){if(a.parentNode){a.parentNode.removeChild(a)}}}(q)),1000)}e.classList.add("transition-in");setTimeout(function(){e.classList.remove("transition-in")},1);e.style.visibility="visible";p.appendChild(e)}else{removeChildren(p);p.appendChild(e);fade(e,{fade:"in"})}tale.setPageElements()}else{p.appendChild(e);e.style.visibility="visible"}if(tale.canUndo()){if(!hasPushState&&type!="back"){this.hash=bookmarkhref;window.location.hash=this.hash}else{if(tale.canBookmark()){var bookmark=document.getElementById("bookmark");bookmark&&(bookmark.href=bookmarkhref)}}}window.scroll(0,0);return e};History.prototype.watchHash=function(){if(window.location.hash!=this.hash){if(window.location.hash&&(window.location.hash!="#")){this.history=[{passage:null,variables:{}}];removeChildren(document.getElementById("passages"));if(!this.restore()){alert("The passage you had previously visited could not be found.")}}else{window.location.reload()}this.hash=window.location.hash}};History.prototype.loadLinkVars=function(){for(var c in this.history[0].linkVars){this.history[0].variables[c]=clone(this.history[0].linkVars[c])}};Passage.prototype.render=function(){var b=insertElement(null,"div","passage"+this.title,"passage");b.style.visibility="hidden";this.setTags(b);this.setCSS();insertElement(b,"div","","header");var a=insertElement(b,"div","","body content");for(var i in prerender){(typeof prerender[i]=="function")&&prerender[i].call(this,a)}new Wikifier(a,this.processText());insertElement(b,"div","","footer");for(i in postrender){(typeof postrender[i]=="function")&&postrender[i].call(this,a)}return b};Passage.prototype.excerpt=function(){var b=this.text.replace(/<<.*?>>/g,"");b=b.replace(/!.*?\n/g,"");b=b.replace(/[\[\]\/]/g,"");var a=b.split("\n");while(a.length&&a[0].length==0){a.shift()}var c="";if(a.length==0||a[0].length==0){c=this.title}else{c=a[0].substr(0,30)+"..."}return c};Passage.transitionCache="";Passage.prototype.setCSS=function(){var trans=false,text="",tags=this.tags||[],c=document.getElementById("tagCSS"),c2=document.getElementById("transitionCSS");if(c&&c.getAttribute("data-tags")!=tags.join(" ")){tale.forEachStylesheet(tags,function(passage){if(~passage.tags.indexOf("transition")){if(!Passage.transitionCache&&c2){Passage.transitionCache=c2.innerHTML}setTransitionCSS(passage.text);trans=true}else{text+=alterCSS(passage.text)}});if(!trans&&Passage.transitionCache&&c2){setTransitionCSS(Passage.transitionCache);trans=false;Passage.transitionCache=""}c.styleSheet?(c.styleSheet.cssText=text):(c.innerHTML=text);c.setAttribute("data-tags",tags.join(" "))}};var Interface={init:function(){var snapback=document.getElementById("snapback"),restart=document.getElementById("restart"),bookmark=document.getElementById("bookmark");main();if(snapback){if(!tale.lookup("tags","bookmark").length){snapback.parentNode.removeChild(snapback)}else{snapback.onclick=Interface.showSnapback}}if(bookmark&&(!tale.canBookmark()||!hasPushState)){bookmark.parentNode.removeChild(bookmark)}restart&&(restart.onclick=Interface.restart)},restart:function(){if(confirm("Are you sure you want to restart this story?")){state.restart()}},showSnapback:function(a){Interface.hideAllMenus();Interface.buildSnapback();Interface.showMenu(a,document.getElementById("snapbackMenu"))},buildSnapback:function(){var b,c=false,menuelem=document.getElementById("snapbackMenu");while(menuelem.hasChildNodes()){menuelem.removeChild(menuelem.firstChild)}for(var a=state.history.length-1;a>=0;a--){if(state.history[a].passage&&state.history[a].passage.tags.indexOf("bookmark")!=-1){b=document.createElement("div");b.pos=a;b.onclick=function(){var p=this.pos;var n=state.history[p].passage.title;while(p>=0){if(state.history.length>1){state.history.shift()}p--}state.display(n)};b.innerHTML=state.history[a].passage.excerpt();menuelem.appendChild(b);c=true}}if(!c){b=document.createElement("div");b.innerHTML="<i>No passages available</i>";document.getElementById("snapbackMenu").appendChild(b)}},hideAllMenus:function(){document.getElementById("snapbackMenu").style.display="none"},showMenu:function(b,a){if(!b){b=window.event}var c={x:0,y:0};if(b.pageX||b.pageY){c.x=b.pageX;c.y=b.pageY}else{if(b.clientX||b.clientY){c.x=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;c.y=b.clientY+document.body.scrollTop+document.documentElement.scrollTop}}a.style.top=c.y+"px";a.style.left=c.x+"px";a.style.display="block";document.onclick=Interface.hideAllMenus;b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation()}}};window.onload=Interface.init;macros.back.onclick=function(back,steps){var title;if(back){if(tale.canUndo()){window.history.go(-steps);return}while(steps-->=0&&state.history.length>1){title=state.history[0].passage.title;state.history.shift()}state.loadLinkVars();state.saveVariables(tale.get(title));state.display(title,null,"back")}else{state.display(state.history[steps].passage.title)}};window.onpopstate=function(e){var title,hist,steps,s=e&&e.state;if(s&&s.id&&s.length!=null){hist=JSON.parse(sessionStorage.getItem("history"+s.id)),steps=hist.length-s.length}if(hist!=null&&steps!=null){state.history=hist;while(steps-->=0&&state.history.length>1){title=state.history[0].passage.title;state.history.shift()}state.loadLinkVars();state.saveVariables(tale.get(title));state.display(title,null,"back")}};

testplay = "";

}());
</script>
<script title="modules">


</script>
<style id="baseCSS">
body {
	background-color: #000;
	color: #fff;
	font-family: Verdana,sans-serif;
	font-size: 62.5%;
	margin: 4em 15% 5% 5em;
}
#sidebar {
	position: absolute;
	width: 12em;
	left: 7.5em;
	list-style: none;
	margin: 0;
	padding: 0 1em 0 0;
	font: bold 1.1em Verdana,sans-serif;
}
#sidebar li {
	color: #333;
	text-align: right;
	background-repeat: no-repeat;
	margin-bottom: 1em;
	line-height: 1.4em !important;
	list-style: none;
}
#sidebar li:hover {
	color: #fff;
	cursor: pointer;
}
#sidebar li a {
	color: #333;
	text-decoration: none;
}
#sidebar li a:hover, #sidebar #title a:hover {
	color: #fff;
	text-decoration: none;
}
#sidebar #title {
	color: #999;
	font-size: 150%;
	cursor: auto;
}
#sidebar #title a {
	color: #999;
}
#sidebar #storySubtitle {
	font-size: 75%;
	display: block;
}
#storyAuthor {
	font-size: 50%;
}
#sidebar #storyMenu {
	display: none;
	line-height: 2.5em;
	margin-bottom: .5em;
	color: #999;
	cursor: auto;
	text-align:right !important;
}
#sidebar #title:hover {
	color: #999;
}
#sidebar #credits {
	padding-top: 2em;
	font-weight: normal;
	font-size: 80%;
	cursor: auto;
}
#sidebar #credits:hover {
	color: #333;
}
#sidebar #credits a {
	text-decoration: none;
}
.menu {
	position: absolute;
	display: none;
	background-color: #343434;
	color: #fff;
	opacity: .9;
	border: 1px solid #fff;
	text-align: left;
	font: 1.1em Verdana;
	line-height: 2em;
}
.menu div {
	padding: 0 .4em;
}
.menu div:hover {
	cursor: pointer;
	background-color: #fff;
	color: #343434;
}
#passages {
	margin-left: 18.2em;
	border-left: 1px solid #333;
	padding-left: 1.5em;
	position:relative;
}
.passage {
	font-size: 1.2em;
	line-height: 175%;
	margin-bottom: 2em;
	text-align: left;
}
.passage ul {
	padding-top: 1.3em;
}
.passage li {
	margin-right: 6em;
}
.passage center {
	max-width:50%;
	margin:auto;
}
.passage a {
	color: #4d6ad8;
	font-weight: bold;
	text-decoration: none;
}
a.internalLink, a.externalLink, a.back, a.return {
	cursor: pointer;
}
.passage a:hover {
	color: #8ea6ff;
	text-decoration: underline;
}
a.brokenLink {
	background-color: red;
	text-decoration: none;
	color: #000;
}
.disabled {
	font-weight: bold;
	color: #333;
}
.marked {
	background-color: red;
	color: #000;
	margin-right: 12px;
	padding: 3px;
}
.marked[title] {
	cursor: help;
}
.passage ul {
	margin-left: .5em;
	padding-left: 1.5em;
}
.passage ol {
	margin-left: .5em;
	padding-left: 1.5em;
}
.passage table {
	border-collapse: collapse;
	font-size: 100%;
	margin: .8em 1.0em;
}
.passage th,.passage td,.passage tr,.passage caption {
	padding: 3px;
}
.passage hr {
	height: 1px;
}
input, button {
	background-color: #000;
	color:#fff;
	font-size: 1.2em;
}
button {
	border: 2px outset #333;
	border-radius:0.5em;
	padding: 0.2em 0.8em;
}
button:active {
	border-style:solid;
}
input[type=text] {
	border: 2px solid #333;
	width: 20%;
}
input[type=text]:hover {
	border-color: #fff;
}
#storeArea {
	display: none;
}
#noscript {
	margin-left: 18.2em;
	font-size: 1.2em;
	font-weight: bold;
}
img {
	vertical-align:bottom;
}
</style>
<style id="transitionCSS">
.transition-in {
	opacity:0;
	position:absolute;
}
.passage:not(.transition-out) {
	transition: 1s;
	-webkit-transition: 1s;
}
.transition-out {
	opacity:0 !important;
	position:absolute;
}
</style>
<style id="storyCSS"></style>
<style id="tagCSS"></style>
</head>
<body>
<ul id="sidebar">
<li id="title" class="storyElement"><span id="storyTitle" class="storyElement"></span><span id="storySubtitle" class="storyElement"></span><span id="titleSeparator"></span><span id="storyAuthor" class="storyElement"></span></li>
<li id="storyMenu" class="storyElement"></li>
<li id="snapback">Rewind</li>
<li id="restart">Restart</li>
<li><a id="bookmark" title="Permanent link to this passage">Bookmark</a></li>
<li id="credits">
This story was created with <a href="http://twinery.org/">Twine</a> and is powered by <a href="http://tiddlywiki.com/">TiddlyWiki</a>
</li>
</ul>
<div id="snapbackMenu" class="menu"></div>
<div id="passages">
<noscript><div id="noscript">Please enable Javascript to play this story!</div></noscript>
<style>#sidebar{display:none;}</style>
</div>
<div id="storeArea"><div tiddler="Mountain" tags="coreLoop explore" modified="201504201745" created="201504191553" twine-position="939,451" modifier="twee">&lt;&lt;set $mountainVisit += 1&gt;&gt;\n&lt;&lt;set $findChance = Math.random(0)*5&gt;&gt;\n&lt;&lt;if $mountainVisit &lt; 2&gt;&gt;\s\nYou look up at the mountain range. The steep climbs, the winding canyons, the hidden valleys, you only caught a glimpse of it when you came in and the scanned map doesn't do it justice.\n\nNormally this kind of exploration would take days, even weeks, however luckily the gravity is so low you can pretty much sprint up like a Terran mountain goat.\n\nYou want to enjoy yourself... but you know that somewhere out there are probably more of those creatures. Knowing that they are out there makes this otherwise desolate landscape feel like a wilderness. As you make your way through the unkonwn terrain, you hold your biotoxin covered club, ready at a moment's notice.\n&lt;&lt;else&gt;&gt;\s\nYou decide to head up to the mountain range again, you're sure to find something new on your climb up a different pathway. At the very least if you don't find anything of note, the exercise would be nice.\n\nTaking full advantage of the low gravity, you start making your way up. Within the hour the base camp is looking like a miniture set in the distance.\n\nBeing more familar with the landscape, relax in some places that you know you can't be ambushed. But as soon as you reach a blind corner or uncharted territory, you hold your club covered in tree sap.\n&lt;&lt;endif&gt;&gt;\nHours later you find yourself &lt;&lt;print either(&quot;at the summit of the mountain. After making sure you're alone you take the time to take in the stunning stellar view. You make sure your recorder is capturing every moment. You manage to spot a couple other asteroids almost moving in orbit to the one you are on.&quot;,&quot;in a small valley between peaks. You hop up on a high spot and looks around, counting the numerous small craters and rock formations. A few places you see other meteors that landed softly enough to not fully bury itself in the surface.&quot;,&quot;moving through a canyon. You carefully tread through, observing the crevasses and small hollow caves that once held gaseous elements before being split open. Since there's no elements for erosion you make sure to keep your distance from the sharp walls.&quot;)&gt;&gt;\n\n\n&lt;&lt;if $findChance &lt; 3&gt;&gt;\s\nYour timer gives off a notice that the day is half over and that you should make your way back. You didn't see anything partically special to take, other than your memories and recordings of your trek in asteroid's mountains. No matter, it's been rewarding in its own way.\n&lt;&lt;else if $findChance &gt; 2 and $fungiFound is 0&gt;&gt;\s\nYou hear your timer's midday notice and you start to head back. However as soon as you take a step you foot sinks into an unusually soft spot of ground and almost loose your balance; you pull it back quickly as a reaction and make a large plume of dust. Great.\n\nSuddenly a small object bounces off your helmet and you reflexively catch it. It must have been a rock in that loose dust... wait that's not a rock!\n\nYou move away from the floating cloud a dust and look carefully at the object. You've seen your share of space rocks (you're surrounded by them!) but this thing looks... organic. Like... a truffle or fungi spore.\n\nCan't tell for sure without the equipment. You open up one of your suit's small capsules and drop the object into it before sealing it back up. Your curiosity is making you want to get back to camp all the more sooner.\n&lt;&lt;set $fungiFound = 1&gt;&gt;\n&lt;&lt;else if $findChance &gt; 3 and $findChance &lt; 4&gt;&gt;\s\nAs soon as you start to turn back, something on the ground catches your eye. You reach down and pick it up...\n\nHuh... it's a rather strange &lt;&lt;print either(&quot;crystal. It manages to catch the light in a way you haven't seen before. Could be a new undiscovered mineral, or at the very least a cool collector item.&quot;,&quot;metallic alloy. You're no expert in metals but its structure feels unusual.&quot;,&quot;glassy object. You look through it in the sunlight and see particles in it. A few moments later though you see a few drops form and you realize it's ice, probably from an ancient comet. You bet that some scientist back home would love to study it.&quot;)&gt;&gt;\n\nYou put it in a capsule for safe keeping and you make your way back.\n&lt;&lt;else if $findChance &gt; 4&gt;&gt;\s\n\t&lt;&lt;if Math.random(1)*50 &gt; 47 &gt;&gt;\s\nSince you have a bit extra time you decide to make your way back a different route. Navigating the terrain some more you turn the corner and...\n\n...\n\nWhat?\n\nWHAT?!\n\nFirst aliens... and now.... Egyptian-like RUINS!?!\n\nLike... really? It's even pyramid shaped! With obelisks!!\n\nYou take a couple deep breaths. Z32 has officially completely and utterly destroyed your view of life in the universe. Accepting the possibility of other life outside Earth is one thing. Accepting that other life can form civilization is another thing. But having it staring you right in the face...\n\nThis discovery is 100% out of your league. You slowly input the location on your suit's map, take a few photos and turn around to go back to camp.\n\nYou feel like you're at the butt end of the greatest cosmic joke right now... like you're stuck in a game where the designer has a thing for ancient alien conspiracy theories...\n\nMaybe you're just hallucinating... yeah, you probably shouldn't have bought those SuperSpaceMeals(tm) that were on deep discount.\n\t&lt;&lt;else&gt;&gt;\s\nSince you have a bit extra time you decide to make your way back a different route. Navigating the terrain some more you turn the corner and spot a strange formation.\n\nYou're not quite sure but part of it feels like it's artificial. The surface is too flat and smooth considering everything else in the area isn't. You take the time to make photos and document the location before you head back to camp.\n\nYou get this lingering feeling that you might not be on an asteroid.\n\t&lt;&lt;endif&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if Math.random(5)*20 &lt; $enemypower*$enemynumber&gt;&gt;\n\t[[your suit's proximity alarm goes off on the way back|Exploration Battle]]\n\t&lt;&lt;else&gt;&gt;\n\t[[time to call it a day|Camp]]\n\t&lt;&lt;endif&gt;&gt;</div><div tiddler="A Hard Awakening" tags="intro" modified="201504201538" created="201504181509" twine-position="505,0" modifier="twee">You suddenly wake up feeling slightly nauseated. Disoriented you hear the alarms sounding as your sleep capsule opens up and you quickly try to get your bearings.\n\nThe shock moments later sends you to the floor. More alarms go off as you scramble to the cabin to get the situation.\n\nYou reached Z32.\n\nYou rub your eyes as you it dawns upon you, you're here. The modern day Space wilderness. The permit IS real! The satellites and patrols let you in without a hitch.\n\nBut you realize you have a problem. You pull up the warnings interface and see what it is. \n\nA small asteroid has hit the ship. It was one of those anomolies which are too fast and small for the ship to dodge in time. What luck you have!\n\nPulling up the damage report, you notice that a few systems and the engine are having problems. It seems fixable but you'll have to land the ship soon before the problem becomes dire.\n\nYou start scanning the area for a place to land. Many of the asteroids are fairly small and have unstable rotations.\n\nSuddenly something promising comes on your radar. It's huge. And it's almost completely spherical as well!\n\n[[you make your way to the giant asteroid|Arrival]]</div><div tiddler="Fissure" tags="coreLoop explore" modified="201504201744" created="201504191554" twine-position="951,192" modifier="twee">&lt;&lt;set $fissureVisit += 1&gt;&gt;\n&lt;&lt;set $findChance = Math.random(0)*5&gt;&gt;\n&lt;&lt;if $fissureVisit &lt; 2&gt;&gt;\s\nThe fissure...\n\nHuman instinct doesn't like dark places for good reason. Darkness is the true embodiment of the unkown. Danger often lurks there, but sometimes you can find great rewards as well. The only instinct that trumps human's dislike of the dark is the curiosity to venture into it. And that curiosity is what's driving you.\n\nYou're pretty sure the fissure was started whatever impact that make the giant crater, and the exposed gas and liquid elements that were previously trapped escaped, creating a intricate cave network. Good thing you prepared to navigate it: extra booster fuel, headlamp, a few backup supplies and a glow-in-the-dark paint.\n\nYou reach a suitable entry point and start to make your descent. You clutch your club and check your reserves of biotoxins. There's a possibility this may be the lair of the alien creatures...\n&lt;&lt;else&gt;&gt;\s\nYou decide to work your courage up again and take another journey into the center of the asteroid.\n\nAs before, you made sure to get the extra supplies needed to traverse the dark landscape. Reaching the entrance that you found before, you take a deep breath and look around. No trace of activity as usual, but it still feels like you're about to enter the lion's den.\n&lt;&lt;endif&gt;&gt;\nYou work your way into the fissure. There are numerous splits so you decide to choose one and make your mark with the paint. Hours later you reach &lt;&lt;print either(&quot;large cavern. It must have been a large pocket of an acidic compound until it escaped as much of the walls are unusually smooth. Much of the metallic walls reflect your headlamp and light up the place, it's really stunning. You turn on your recorder and take some footage, you can't wait to show this when you get back.&quot;,&quot;a narrow canyon. It seems that the path you took is going through the middle of the fissue as you spot large gaps in the ceiling into the starry heavens.&quot;,&quot;a tight windy maze of dark pathways. You make liberal use of your glow in the dark paint as you run into multiple dead ends and spots too tight to fit through. You clutch your stick, ready for anything that could pop up around the corner.&quot;)&gt;&gt;\n\n&lt;&lt;if $findChance &lt; 3&gt;&gt;\s\nYou didn't notice it was midday until your clock goes off. Probably a good idea to go back. As cool as it was exploring this dark fissure &lt;&lt;if $fissureVisit &gt; 1&gt;&gt;again&lt;&lt;endif&gt;&gt;, you're looking forward to seeing some sunlight. You're glad that your glow markings are easy to spot coming back and follow them to the entrance.\n&lt;&lt;else if $findChance &gt; 2 and $fungiFound is 0&gt;&gt;\s\nYou hear your clock's midday notice and you decide to turn around. However on your way back you foot suddenly sinks into an unusually soft spot of ground. What the!? You trip over but catch yourself, your hands sinking partway into the ground as it creates an almost blinding cloud of dust. Soft landing at least...\n\nAs you get up you feel something strange against your hand. You grab it and pull it out of the dirt.\n\nYou move away from the floating cloud a dust and look carefully at the object with your lamp. You've seen your share of space rocks (you're surrounded by them!) but this thing looks... organic. Like... a truffle or fungi spore.\n\nCan't tell for sure without the equipment. You open up one of your suit's small capsules and drop the object into it before sealing it back up. Your curiosity is making you want to get back to camp all the more sooner.\n&lt;&lt;set $fungiFound = 1&gt;&gt;\n&lt;&lt;else if $findChance &gt; 3 and $findChance &lt; 4&gt;&gt;\s\nAs interesting as it is, the fissure is starting to get to you and you figure you should head back. Knowing you're completely alone inside the asteroid has given you a claustrophobic feeling. Looking at your clock you see it's almost time anyways.\n\nClimbing back out you see something unusual in a tiny corner and investigate it. You find it's &lt;&lt;print either(&quot;a pitch black crystal. That's unusual, it doesn't reflect any light at all from your headlamp. This might be something undiscovered.&quot;,&quot;a vein of shiny metal along the wall. You think it might be platinum or palladium. You find a piece you can break off.&quot;,&quot;a pool of smooth material. You look at it carefully before you drop a bit of dust off of it and see it bounce off as the material changes texture. Strange. You get your small tongs and find you can pull off a piece that hardens like metal.&quot;)&gt;&gt;\n\nYou put it in a capsule for safe keeping and you make your way back.\n&lt;&lt;else if $findChance &gt; 4&gt;&gt;\s\nAs interesting as it is, the fissure is starting to get to you and you figure you should head back... wait what's that?\n\nYou look at the wall nearby.\n\nIs that carvings? \n\nYou can't tell for sure but looking at it sends chills down your spine. You decide to use your recorder and make note on its location before moving on.\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if Math.random(4)*19 &lt; $enemypower*$enemynumber&gt;&gt;\n\t[[your suit's proximity alarm goes off on the way back|Exploration Battle]]\n\t&lt;&lt;else&gt;&gt;\n\t[[time to call it a day|Camp]]\n\t&lt;&lt;endif&gt;&gt;</div><div tiddler="Crater" tags="coreLoop explore" modified="201504201745" created="201504191614" twine-position="939,323" modifier="twee">&lt;&lt;set $craterVisit += 1&gt;&gt;\n&lt;&lt;set $findChance = Math.random(0)*5&gt;&gt;\n&lt;&lt;if $craterVisit &lt; 2&gt;&gt;\s\nCraters are the one formation Earth hardly has, mostly because of erosion and active tectonics. The moon's craters are often a tourist location, and over the years they get covered in tracks as everybody tries to make their memorable 'step' on the surface.\n\nSeeing a crater that nobody has been to is such a breathtaking sight. You stood there on the rim, looking over the landscape for the better part of the hour, soaking it all in.\n\nLuckily the only real places to hide in a crater is in smaller craters. Still, that means if you could be a sitting duck the alien creatures can spot from kilometers away. So it's not so much the ambush but the fact that running and hiding is all the more difficult.\n\nBut you are prepared. In your hand you have your trusty tree branch covered in biotoxic sap... well, toxic to the aliens at least.\n&lt;&lt;else&gt;&gt;\s\nYou decide to take another short journey to the asteroid's giant crater. Skipping along the low gravity, you reach the top of the ridge and look out at the giant valley below riddled with smaller craters.\n\nIt's still a breathtaking sight to behold. Knowing you are the first person in history to have explored this corner of the solar system here makes it feel all the more personal.\n\nYou scan the area, no trace of those aliens. That's good. You decide to pick a different part of the crater to explore.\n&lt;&lt;endif&gt;&gt;\nHours later you end up &lt;&lt;print either(&quot;walking through part of the vast valley of the crater. Even by travelling quickly with the low gravity assisting you, it feels like you haven't gotten anywhere close to the center. Whatever had made this mark thousands or millions of years ago must have been enormous, and the impact probably pushed this asteroid into Z32.&quot;,&quot;skipping across a field of smaller craters. You take caution when you near the edges of some of them, they could make perfect hiding spots. The other danger is some of them are steep enough to cause trouble if you fall in, although you do have your emergency booster pack if that happens. Still, you enjoy yourself looking at all the random patterns on the surface, some of them looking orgainzed.&quot;,&quot;climbing along the inner wall of the giant crater. What looked like smooth bumpy ridges in the distance were in fact not smooth at all; in fact most of the wall is populated by the heavier rocks and pieces that got pushed by the impact, creating holes and caves. You take your time to cross carefully, watching your footing and for any unpleasant surprises.&quot;)&gt;&gt;\n\n&lt;&lt;if $findChance &lt; 3&gt;&gt;\s\nAt midday the timer goes off, telling you to head back. You didn't find anything souviniers this time but the sights and recordings of your day long trip in asteroid's crater. Not a bad way to spend your day, hopefully the trip back will be uneventful.\n&lt;&lt;else if $findChance &gt; 2 and $fungiFound is 0&gt;&gt;\s\nYou hear your timer's midday notice and you start to head back. However as soon as you take a step you foot sinks into an unusually soft spot of ground and almost loose your balance; you pull it back quickly as a reaction and make a large plume of dust. Great.\n\nSuddenly a small object bounces off your helmet and you reflexively catch it. It must have been a rock in that loose dust... wait that's not a rock!\n\nYou move away from the floating cloud a dust and look carefully at the object. You've seen your share of space rocks (you're surrounded by them!) but this thing looks... organic. Like... a truffle or fungi spore.\n\nCan't tell for sure without the equipment. You open up one of your suit's small capsules and drop the object into it before sealing it back up. Your curiosity is making you want to get back to camp all the more sooner.\n&lt;&lt;set $fungiFound = 1&gt;&gt;\n&lt;&lt;else if $findChance &gt; 3 and $findChance &lt; 4&gt;&gt;\s\nYou check your clock and decide to head home. Using the landmarks and your map you skip along in the low gravity until you spot something at your feet. Almost stepping on it you turn around after a few hops to pick it up.\n\nInteresting... you found a &lt;&lt;print either(&quot;small meteor. Its shape really looks mesmerizing. While almost everyone has a meteor collection nowadays, it's fun to collect neat ones in your travels.&quot;,&quot;nugget of metal. Looking at it in the light it gives off the unmistakable color. Awesome! Gold! While no longer as valuable as ancient times, it's still pretty and popular in fashion today.&quot;,&quot;shard of... something. You look through it in the sunlight before you notice smoke begins to come off and realize it's frozen gas! You recall some institutes always looking for samples in their studies.&quot;)&gt;&gt;\n\nYou put it in a capsule for safe keeping and you make your way back.\n&lt;&lt;else if $findChance &gt; 4&gt;&gt;\s\nYou check your clock and decide to head home. Using the landmarks and your map you skip along in the low gravity until you spot something...\n\nStrange. You move closer and confirm. You're not an expert of archeology, but you're pretty sure you just found blocks. They look like they were once a wall but the impact that made the crater destroyed it. You make sure to record its location before moving on.\n\nA lingering thought on your mind is telling you this might be part of why Z32 was closed.\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if Math.random(5)*20 &lt; $enemypower*$enemynumber&gt;&gt;\n\t[[your suit's proximity alarm goes off on the way back|Exploration Battle]]\n\t&lt;&lt;else&gt;&gt;\n\t[[time to call it a day|Camp]]\n\t&lt;&lt;endif&gt;&gt;</div><div tiddler="Start" tags="intro" modified="201504201553" created="201504181323" twine-position="130,5" modifier="twee">&lt;&lt;nobr&gt;&gt;\n&lt;&lt;set $playerhp = 10&gt;&gt;\n&lt;&lt;set $days = 0&gt;&gt; /%if 30 days reached, rescue arrives %/\n&lt;&lt;set $oxygen = 20&gt;&gt; /%if 0, player dies %/\n&lt;&lt;set $co2 = 5&gt;&gt;\t/%if oxy/co2 &gt; 1, playerhp -1 %/\n&lt;&lt;set $treePower = 1&gt;&gt; /% 0-10 %/\n&lt;&lt;set $treeNumber = 1&gt;&gt;\n&lt;&lt;set $treeOxy = 0&gt;&gt; /% each day: treePower*treeNumber %/\n&lt;&lt;set $fungiFound = 0&gt;&gt;\n&lt;&lt;set $fungiUsed = 0&gt;&gt;\n&lt;&lt;set $daysFungi = 0&gt;&gt;\n&lt;&lt;set $fungiSymb = 0&gt;&gt; /% 0-5 %/\n&lt;&lt;set $biotoxin = 0&gt;&gt; /% added by treenumber*treepower*fungiSymb %/\n&lt;&lt;set $timesGardened = 0&gt;&gt;\n&lt;&lt;set $foundenemy = 0&gt;&gt;\n&lt;&lt;set $enemypower = 1&gt;&gt; /% goes up every few days %/\n&lt;&lt;set $enemynumber = 1&gt;&gt; /% added everyday, removed during attack %/\n&lt;&lt;set $enemyAttackNumber = 1&gt;&gt; \n&lt;&lt;endnobr&gt;&gt;\nSector Z32... The astroid cluster.\n\nFifty years ago Sector Z32 was a special zone in the astroid belt that all nations agreed to close off to everybody. No visits, no commercialization, no goverment outposts. \n\nThe only human presence Z32 has are the border satellites and patrols that keep anyone from ever reaching it.\n\n[[a chance of a lifetime|Your Situation]]</div><div tiddler="Exploration Battle" tags="coreLoop battle" modified="201504201758" created="201504191647" twine-position="780,148" modifier="twee">&lt;&lt;nobr&gt;&gt;\n&lt;&lt;if $enemynumber &lt; 2&gt;&gt;&lt;&lt;set $enemynumber = 2&gt;&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;set $enemyAttackNumber = either(2,3,4,$enemynumber)&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\nAs soon as the proximity alarm rings you spring into action. You find yourself &lt;&lt;print either(&quot;pretty close to your base camp, although you know you can't sneak that far without getting spotted, you make a low profile and scan the area to see what your options are.&quot;,&quot;near a large rock, you use it for cover to figure out what you plan is.&quot;,&quot;next to a shallow crater and you take the time to hop over the edge and hunker down to figure out your next move.&quot;)&gt;&gt;\n\nSoon you finally see what it is, confirming that it is them.\n\nYou spot &lt;&lt;$enemynumber&gt;&gt; &lt;&lt;print either(&quot;uncanny humanoids, unmistakably aliens&quot;,&quot;ugly creatures&quot;,&quot;aliens&quot;)&gt;&gt;. \n&lt;&lt;if $enemypower is 1&gt;&gt;\s\nThey look like the one you first encountered. It looks like they haven't learned about your sap.\n&lt;&lt;else if $enemypower is 2&gt;&gt;\s\nThey seem to be wearing something now, some sort of rudimentary clothes. It seems they are figuring out the nature of your weapon.\n&lt;&lt;else if $enemypower &lt; 5&gt;&gt;\s\nThey have come prepared this time and most are covered to try to protect against your biotoxins.\n&lt;&lt;else if $enemypower &gt; 4&gt;&gt;\s\nAfter all the skirmishes they had with you, they are now heavily armored... but thankfully they don't have much for weapons, much less modern ones. You feel like this is probably the best equipment they got.\n&lt;&lt;endif&gt;&gt;\nYou double check your &lt;&lt;print either(&quot;'ammo'&quot;,&quot;amount of biotoxins you have&quot;,&quot;container holding the sap&quot;)&gt;&gt;, you got &lt;&lt;$biotoxin&gt;&gt; tablespoons.\n\nHow should you take them on?\n[[Go all out|Battle Result][$ferocity = 3; $greenhouse = 0]]\n[[Skirmish|Battle Result][$ferocity = 2; $greenhouse = 0]]\n[[Defensively|Battle Result][$ferocity = 1; $greenhouse = 0]]</div><div tiddler="Arrival" tags="intro" modified="201504201541" created="201504181628" twine-position="633,1" modifier="twee">Navigating through Z32, you finally arrive to find a massive asteroid. It spins very slowly in your view, the surface peppered with craters, with one giant one. \n\nAs you stare at it, you get a strange feeling...\n\nUsing your ship's data, you find that it has .1G gravity! That's over half the gravity of Earth's moon!\n\n&quot;You have the option to claim one (1) stellar body in Z32.&quot;\n\nRaw materials have value in space. Any asteroid of five kilometers in diameter is worth a small fortune. \n\nSomething this size is worth... unfathamable.\n\nYou scan the surface and find a suitable spot that'll protect against stray meteors. After landing the ship, you suit up. If it weren't for that stupid rock you would be very giddy, but then again you probably wouldn't have been woken up until you were deeper in Z32 and completely missed it.\n\nYou depressurize the chamber and start climbing the ladder to open the hatch on top of the ship. As much as you wanted to do a whole &quot;small step for man&quot; moment, taking care of the ship comes first.\n\n...\n\n. . .\n\n.  .  .\n\nCrap!\n\nIt hit the reserve oxygen tank... and the environment system!\n\n[[what are my options?|Your Plan]]</div><div tiddler="Fungi Result" tags="oneTime" modified="201504200250" created="201504191449" twine-position="7,380" modifier="twee">&lt;&lt;nobr&gt;&gt;\n&lt;&lt;set $fungiSymb = 1&gt;&gt;\n&lt;&lt;set $treePower += 1&gt;&gt;\n&lt;&lt;set $fungiUsed = 1&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\nThe task of waiting was boring to say the least. Obviously the fungi isn't engineered like your instant trees. You caught yourself nodding off a few times... no change... yet...\n\n...\n\n. . .\n\nYou start to hear the sound of beeping as you wake up. Realizing that you napped through the better part of the day you get up and stretch, breathing in the nice sweet smell coming from the vents, undoubtedly from the greenhou-\n\nOH SHIT!\n\nOhshitohshitohshitohshit!!\n\nYou realized you forgot to seal the ventiliation between the greenhouse the rest of your camp!\n\nPanicking you quickly you quickly look at the sensor readings. You realize the beeping was the warning indicator showing that there was a drastic change in the environment.\n\nPollen level... +5ppm\nTree auxin concentration... +40%\nTree biotoxin concentration.... +100%\nOxygen production.... +&lt;&lt;print (($treePower/($treePower-1))-1)*100&gt;&gt;%\nAir quality.... clean\n\nYou stare at the numbers... and then go over them again. You look at the cameras and notice the leaves on the tree noticably larger.\n\nYou take a deep breath... this experiment was... a success. Thank the stars.\n\n[[you take the rest of the day off to relax and prepare for tomorrow|Camp]]\n</div><div tiddler="Success!" tags="ending" modified="201504191733" created="201504191648" twine-position="277,134" modifier="twee">You stare at the message...\n\nit's a deed.\n\nA deed to the asteroid you're on! You did it!\n\nYou stare outside the window of your cockpit. This whole landscape... is yours. It feels so surreal.\n\nLooking back at the screen you send out the verification message that you recieved and accept the deed. A few moments later you get a message detailing the schedule of your debriefing, one of those fine print terms you have to follow, go figure.\n\nIt's going to be strange coming back to civilization... to tell the story of your time in Z32.\n\nYou take the time to pack up your equipment, leaving the shell of the base camp on the surface.\n\nIt's time to go home.</div><div tiddler="Your Plan" tags="intro" modified="201504182348" created="201504181640" twine-position="760,2" modifier="twee">Checking the current levels it seems you have &lt;&lt;$oxygen&gt;&gt; unit-days of oxygen left, but the larger problem is that your air already has &lt;&lt;$co2&gt;&gt; unit-days of CO~~2~~, which if it reaches the same level as oxygen, you're going to have a hard time breathing.\n\nBut the good thing is that your equipment is completely fine. And one thing you have to help your air problem is genetically engineered instant tree.\n\nWhile your ship isn't small, it's not large enough to fit a fully grown tree. So it's time to make a base camp.\n\nYour vacations on the Moon are paying off as you adjust to the low gravity. After a few hours of labor you get the camp structure built and hooked up your ship. After building a greenhouse, you retrieve the instant tree capsule and carefully plant it and water it...\n\nYou wait a couple minutes at first you doubt there's enough sunlight for it to- yes! You spot a small stem and some leaves already poking out. It was not long that it eventually grew taller than you, a true marvel of modern science!\n\nWith the tree growing, you feel like your camp is in good enough shape to last the thirty days needed to claim it. You go back to the ship and start the claim process.\n\n[[Now your camp is complete!|Camp]]</div><div tiddler="Escape!" tags="ending" modified="201504191742" created="201504191649" twine-position="152,133" modifier="twee">You finally reach the cockpit and set the routine for emergency takeoff. There's a lot of stuff still at the base camp ground but you're not in any shape to load it.\n\nA few moments later your ship beeps, indicating it's ready to launch. You start the sequence and after a minute of acceleration, you're on your way out.\n\nYou breathe a bit more easily as the ship's emergency reserves kick in and find that there's enough to get you just out of Z32. Typing in the commands you program the ship to send a distress signal as you exit.\n\nYou're tired... but you're alive still. At the very least you got a story to tell... although the fact you were &lt;&lt;print 30-$days&gt;&gt; days away from claiming that giant asteroid makes it hard. Maybe you'll write a book on your expedition and make some money at least.\n\nYou go back to your sleep capsule and turn it on, you can't wait to get home.</div><div tiddler="Early Exploration" tags="coreLoop explore" modified="201504192039" created="201504191556" twine-position="581,401" modifier="twee">You look around the area, getting used to walking around in low gravity. The landscape reminds you of the old Moon photos before it got developed into spaceports and cities.\n\nGood thing you brought your recorder with you! The pictures of your base camp and surrounding area looks worthy of a magazine, but even more impressive is the view of the sky! Looking up, you spot many of the asteroids moving across, hundreds of tiny wobbly moons without a set pattern.\n\n&lt;&lt;if Math.random(0,10) &lt; 8&gt;&gt;\n\t[[what was that that in the distance?|First Encounter Outside]]\n&lt;&lt;else&gt;&gt;\n\t[[time to call it a day|Camp]]\n&lt;&lt;endif&gt;&gt;</div><div tiddler="StoryTitle" tags="" modified="201504181354" created="201504181323" twine-position="1,7" modifier="twee">A Month in Z32</div><div tiddler="First Encounter Outside" tags="onetime battle" modified="201504191946" created="201504191647" twine-position="515,532" modifier="twee">&lt;&lt;set $foundenemy = 1&gt;&gt;\nIt's far away but it's without a doubt, movement. You look back at the base camp nearby and back at where you thought you saw something.\n\nThen without warning you see a shape barreling straight at you. Without thinking you scramble and jump as fast as you can back to the camp. You don't know what it is but your instincts are screaming run!\n\nYou need to get in quickly, the pressurization chamber is too slow. Looking back you see it getting closer and decided to jump through the Grenhouse walls, at least they are self sealing.\n\nA few moments later you hear another break as &quot;It&quot; entered in behind you.\n\nIt... of all the imagined aliens, they fell short of this. It was homonid shaped. But that's the only thing that didn't look natural.\n\nYour feet started moving on its own, trying to get away. You don't know why but you chose to run straight at the tree, putting it between you and the creature.\n\nThe creature jumped but miscalculated and hit a tree branch, breaking it off, then you heard a screeching howl as it writhed on the ground.\n\nWithout thinking you grapped the broken branch and jabbed the end at the alien. Suddenly you heard a strong sizzle and more screams as the creature backed off before bolting out of the greenhouse, breaking through another wall.\n\nALIENS!\n\nYour legs wobbled... as you tried to get a grip on what happened. You encountered. It attacked, you fended it off... and the stick...\n\nYou took a look at the stick, it was oddly too effective. Then you noticed it was dripping sap profusely, one of the side effects that makes an instant tree grow quickly.\n\nCould it be the sap is toxic to them? It seemed to be the case. You decide it's probably worth collecting the sap in case that creature... or more of them return.\n\nYou take some time to fix the greenhouse walls... blast, you probably lost some oxygen. &lt;&lt;set $oxygen -= 1&gt;&gt;\n\nAfter fixing it, you set up perimeter sensors.\n\n[[after you feel like you prepared the camp enough, you go to sleep for the next day...|Camp]]</div><div tiddler="Use Fungi" tags="oneTime" modified="201504191450" created="201504190219" twine-position="5,255" modifier="twee">You decide to take another look at that strange fungal spore you picked up from your explorations. Going to your makeshift lab you retrieve the sealed capsule containing it and put it on the table.\n\nBack in the day, you recall reading in a book that some fungi can greatly help a tree's growth by creating a sort of delivery network of minerals. However this is... alien fungi... it could very well kill the tree and you'll have to rely on the &lt;&lt;$oxygen&gt;&gt; unit-days of oxygen...\n\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;if $oxygen &gt; (30-$days)&gt;&gt;\nHowever... you should have enough oxygen to last the rest of your expedition, provided you don't have any more incidents. \n&lt;&lt;else&gt;&gt;\nThis is going to be very risky, if it kills all &lt;&lt;$treeNumber&gt;&gt; trees, you'll be out of luck. \n&lt;&lt;endif&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\nHeck with it! You already have more than enough evidence of extraterrestial life to probably become famous anyways. But one thing for sure, you're going to get in your suit first because last thing you want is to be infected by harmful spores.\n\nReturning suited up, you grab the spore capsule and take it to the greenhouse. You slowly open the capsule and grab the spore gently with some vice grips. You cut a small piece off to keep it in the capsule, should be a good enough sample to bring home.\n\nThe moment of truth.\n\nYou slowly make a tiny hole in the lattice material the trees are growing in and drop the fungi into it before covering it up. Then you lightly water the spot. It is done.\n\nNow... it's time to wait and see what happens. You bring a couple sensors into the greenhouse and a camera of the spot you planted it.\n\n[[the result...|Fungi Result]]</div><div tiddler="Battle Result" tags="" modified="201504201759" created="201504201624" twine-position="406,394" modifier="twee">&lt;&lt;nobr&gt;&gt;\n/% Lots of battle logic %/\n\n/% How many aliens engage with you %/\n&lt;&lt;if $ferocity is 3&gt;&gt;\n\t&lt;&lt;set $enemyEngaged = $enemyAttackNumber&gt;&gt;\n\t&lt;&lt;set $enemyRun = 0&gt;&gt;\n&lt;&lt;else if $ferocity is 2&gt;&gt;\n\t&lt;&lt;set $enemyEngaged = either(2,($enemyAttackNumber-1),$enemyAttackNumber)&gt;&gt;\n\t&lt;&lt;set $enemyRun = $enemyAttackNumber-$enemyEngaged&gt;&gt;\n&lt;&lt;else if $ferocity is 1&gt;&gt;\n\t&lt;&lt;set $enemyEngaged = 1&gt;&gt;\n\t&lt;&lt;set $enemyRun = $enemyAttackNumber-$enemyEngaged&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\n&lt;&lt;if $ferocity is 3&gt;&gt;\s\nYou decide to go all out! Without warning you rush out to the &lt;&lt;$enemyEngaged&gt;&gt; aliens with your trusty &lt;&lt;print either(&quot;stick swinging wildly&quot;,&quot;toxic weapon pointed at them&quot;,&quot;branch in hand, throwing biotoxin covered projectiles&quot;)&gt;&gt;.\n&lt;&lt;else if $ferocity is 2&gt;&gt;\s\nUsing your toxic covered projectiles you decide to do a skirmish battle. Luckily you got the element of surprise. You try to take on as many as you safely can.\n&lt;&lt;else&gt;&gt;\s\nYou go on the defense, as soon as the aliens spot you, you double down and hold your weapon in hand. Your skills of playing hologames has helped you greatly as you outmaneuver and engage with a single target.\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;nobr&gt;&gt;\n/% How many you take out & damage received %/\n&lt;&lt;set $totalEnemyHp = $enemyEngaged*4*$enemypower&gt;&gt;\n&lt;&lt;set $totalEnemyHp -= $biotoxin&gt;&gt;\n&lt;&lt;if $totalEnemyHp &lt; 0&gt;&gt;\nYour battle was a great success! You greatly wounded all you got to engage with and didn't get a scratch on you. Your biotoxins did all the work you must admit but it feels good.\n\t&lt;&lt;set $biotoxin -= $totalEnemyHp&gt;&gt;\n\t&lt;&lt;set $playerDamage = 0&gt;&gt;\n&lt;&lt;else if $totalEnemyHp &gt; 0 and $totalEnemyHp &lt; (4*$enemypower)&gt;&gt;\nYou battle it out and had a close call. You used all of your biotoxins to take on all the aliens, wounding them and you didn't recieve any major hits.\n\t&lt;&lt;set $biotoxin = 0&gt;&gt;\n\t&lt;&lt;set $playerDamage = 0&gt;&gt;\n&lt;&lt;else if $totalEnemyHp &gt; (4*$enemypower)&gt;&gt;\nThis battle didn't turn out well... on top of running out of toxins the enemy got the advantage and took shots of you, you still dealt injuries but one of them retreated without a scratch.\n\t&lt;&lt;set $biotoxin = 0&gt;&gt;\n\t&lt;&lt;set $playerDamage = 1&gt;&gt;\n\t&lt;&lt;set $enemyRun += 1&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\n\n&lt;&lt;nobr&gt;&gt;\n/% What kind of damge you receive %/\n&lt;&lt;if $playerDamage is 1&gt;&gt;\n\t&lt;&lt;if $greenhouse is 1&gt;&gt;\nOn top of the battle not going well, you couldn't avoid the battle going into the greenhouse. The walls sealed up but you know you lost some oxygen &lt;&lt;set $oxygen -= 1&gt;&gt; and one of your trees got damaged beyond repair.\n\t\t&lt;&lt;if Math.random(0)*2 &gt; 1&gt;&gt;\nThankfully the tree did what it was programmed and dropped an emergency seed. You take the time to plant it to replace it.\n\t\t&lt;&lt;else&gt;&gt;\nUnfortunately it was too damaged for a seed to form and you lost the tree. &lt;&lt;set $treeNumber -= 1&gt;&gt;&lt;&lt;set $playerhp -= 1 &gt;&gt;\n\t\t&lt;&lt;endif&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\nThankfully your suit held up to the abuse however you ache all over. You limp on back to your camp to patch yourself up. &lt;&lt;set $playerhp -= Math.random(1)*3&gt;&gt;\n\t&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;else&gt;&gt;\n\t&lt;&lt;if $greenhouse is 1&gt;&gt;\nYou did well defending your camp today. \n\t\t&lt;&lt;if Math.random(0)*2 &gt; 1&gt;&gt;\nUnfortunately the fight got into the greenhouse and you lost some precious oxygen &lt;&lt;set $oxygen -= 1&gt;&gt;, but the trees are alright. \n\t\t&lt;&lt;else&gt;&gt;\nYou luckily kept the fight out of the greenhouse, that's one more thing to be happy about. \n\t\t&lt;&lt;endif&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\nYou're tired but feeling fine. You make your way back to camp and thankfully it was undisturbed. \n\t&lt;&lt;endif&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n/% End battle %/\n&lt;&lt;set $enemynumber -= ($enemyAttackNumber - $enemyRun)&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\n\n[[With the day getting late, you decide to sleep early for the night.|Camp]]</div><div tiddler="Your Situation" tags="intro" modified="201504190054" created="201504182011" twine-position="254,5" modifier="twee">You can hardly believe it! You cling to the chip in your hand.\n\nInside it was a permit for a space expedition to Z32 and it includes rights to make a mineral claim of what you find!\n\nNobody has ever gotten one of these before. Not even the best universities with their qualified people. Not even the megacorporations with their ability to bend the laws and cozy up with policy makers.\n\nIt started as a stupid bet you made with your friends at your birthday party. Then suddenly yesterday you recieved official package, you double checked to make sure it was legitimate.\n\nMaybe some bureaucrat was sleeping on the job and didn't pay attention... or maybe he or she thought it would be a great joke to let a single person get something every space entrepreneur would kill to get.\n\nNow here you are, the chip in hand and walking to the hanger where your ship is. As soon as you get to the ship you plug it in and read through some of the terms again:\n\n-Permit is valid only for one (1) expedition only.\n-You cannot sell or transfer the permit to any third party.\n-You may bring __NO__ weapons to Z32.\n-You have the option to claim one (1) stellar body in Z32.\n-You must stay in Z32 for thirty (30) days on said stellar object for the claim to be valid.\n\n[[It's time to go|The Journey]]</div><div tiddler="First Encounter Greenhouse" tags="onetime battle" modified="201504191945" created="201504191645" twine-position="23,518" modifier="twee">&lt;&lt;set $foundenemy = 1&gt;&gt;\nIt sounded like scratching... which is unusual for something desolate.\n\nYou take the time to investigate around the greenhouse until you saw &quot;it&quot;!\n\nIt... of all the imagined aliens, they fell short of this. It was homonid shaped. But that's the only thing that didn't look natural.\n\nAs soon as your eyes met the creature your adrenaline rushed and you stared at a state of shock. Then the creature noticed you and lurched right at you, breaking through the greenhouse wall and activating the self healing panels.\n\nYour feet started moving on its own, trying to get away. You don't know why but you chose to run straight at the tree, putting it between you and the creature.\n\nThe creature jumped but miscalculated and hit a tree branch, breaking it off, then you heard a screeching howl as it writhed on the ground.\n\nWithout thinking you grapped the broken branch and jabbed the end at the alien. Suddenly you heard a strong sizzle and more screams as the creature backed off before bolting out of the greenhouse, breaking through another wall.\n\nALIENS!\n\nYour legs wobbled... as you tried to get a grip on what happened. You encountered. It attacked, you fended it off... and the stick...\n\nYou took a look at the stick, it was oddly too effective. Then you noticed it was dripping sap profusely, one of the side effects that makes an instant tree grow quickly.\n\nCould it be the sap is toxic to them? It seemed to be the case. You decide it's probably worth collecting the sap in case that creature... or more of them return.\n\nYou take some time to fix the greenhouse walls... blast, you probably lost some oxygen. &lt;&lt;set $oxygen -= 1&gt;&gt;\n\nAfter fixing it, you set up perimeter sensors.\n\n[[after you feel like you prepared the camp enough, you go to sleep for the next day...|Camp]]</div><div tiddler="Camp" tags="coreLoop HUB" modified="201504201755" created="201504181741" twine-position="484,243" modifier="twee">&lt;&lt;nobr&gt;&gt;\n&lt;&lt;set $days += 1&gt;&gt;\n/% Oxygen/Co2, Tree & Player stats %/\n&lt;&lt;if $days &gt; 1&gt;&gt;\n\t&lt;&lt;set $oxygen -= 1&gt;&gt;\n\t&lt;&lt;set $co2 += 1&gt;&gt;\n\t&lt;&lt;set $treeOxy += ($treeNumber * $treePower)&gt;&gt;\n\t&lt;&lt;if $treeOxy &gt; 6 &gt;&gt;\n\t\t&lt;&lt;set $oxygen += 2&gt;&gt;\n\t\t&lt;&lt;set $co2 -= 1&gt;&gt;\n\t\t&lt;&lt;set $treeOxy = 0&gt;&gt;\n\t&lt;&lt;else if $treeOxy &gt; 4 &gt;&gt;\n\t\t&lt;&lt;set $oxygen += 1&gt;&gt;\n\t\t&lt;&lt;set $co2 -= 0.5&gt;&gt;\n\t\t&lt;&lt;set $treeOxy = 0&gt;&gt;\n\t&lt;&lt;endif&gt;&gt;\n\t&lt;&lt;if $oxygen / $co2 &lt; 1 &gt;&gt;\n\t\t&lt;&lt;set $playerhp -= 1&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $playerhp &lt; 10&gt;&gt;&lt;&lt;set $playerhp += 1&gt;&gt;&lt;&lt;endif&gt;&gt;\n\t&lt;&lt;endif&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n/% Fungi Symbiosis %/\n&lt;&lt;if $fungiUsed is 1&gt;&gt;\n\t&lt;&lt;set $daysFungi += 1&gt;&gt;\n\t&lt;&lt;if $daysFungi % 7 is 6 and $fungiSymb &lt; 5&gt;&gt;\n\t\t&lt;&lt;set $fungiSymb += 1&gt;&gt;\n\t&lt;&lt;endif&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n/% Enemy and Biotoxin stats %/\n&lt;&lt;if $foundenemy is 1&gt;&gt;\n\t&lt;&lt;set $biotoxin +=($treeNumber * $treePower * ($fungiSymb+1))&gt;&gt;\n\t&lt;&lt;set $enemynumber += 1&gt;&gt;\n\t&lt;&lt;if $days % 6 is 0&gt;&gt;\n\t\t&lt;&lt;set $enemypower += 1&gt;&gt;\n\t&lt;&lt;endif&gt;&gt;\n\t\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\nYou're at the camp on the giant asteroid in Z32. This is day &lt;&lt;$days&gt;&gt; on your expedition.\n&lt;&lt;if $days &gt; 29&gt;&gt;\n[[Out of nowhere your ship gets a message!|Success!]]\n&lt;&lt;else&gt;&gt;\s\n&lt;&lt;if $oxygen &lt; 1&gt;&gt;\nYou wake up with a massive headache, alarms ringing in your ear. You struggle to get up as you breathe heavily and reach for the status tablet. Your Oxygen levels are in danger level! \nIf you stay any longer you're not going to make it!\n\n[[you use the best of your strength to get to the ship cockpit|Escape!]]\n&lt;&lt;else&gt;&gt;\s\nChecking your air status, you see you have &lt;&lt;$oxygen&gt;&gt; unit-days of oxygen and &lt;&lt;$co2&gt;&gt; unit-days of CO~~2~~.\n&lt;&lt;if $oxygen/$co2 &lt; 1&gt;&gt;\s\nYou're finding it hard to breathe and you're sure this probably isn't good for your health.\n&lt;&lt;else&gt;&gt;\s\nSince the relative CO~~2~~ levels are low you're breathing alright.\n&lt;&lt;endif&gt;&gt;\s\n&lt;&lt;if $playerhp &lt; 0&gt;&gt;\nAs you try to get out of your sleeping pod you collapse on the floor, almost passing out. You slowly crawl up to check your health status... red warnings everywhere. If you get any worse you're not going to make it out.\n\n[[you use the best of your strength to get to the ship cockpit|Escape!]]\n&lt;&lt;else&gt;&gt;\s\n&lt;&lt;if $playerhp &lt; 3&gt;&gt;\s\nYou're feeling pretty bad right now. If this gets any worse you're going to need to bail on this.\n&lt;&lt;else if $playerhp &lt; 7&gt;&gt;\s\nIt's been a bit rough but you think you'll manage the rest of the time here.\n&lt;&lt;else if $playerhp &gt; 6&gt;&gt;\s\nYou're physically feeling pretty good so far.\n&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;if $treeNumber &gt; 0&gt;&gt;\n&lt;&lt;if $treeNumber is 1&gt;&gt;\nIn your greenhouse you got a single tree, \n&lt;&lt;else if $treeNumber is 2&gt;&gt;\nYour duo of trees are in your greenhouse, \n&lt;&lt;else if $treeNumber &gt; 12&gt;&gt;\nYou never expected to grow a forest but you pretty much have one in your greenhouse, last time you counted you had &lt;&lt;$treeNumber&gt;&gt; trees, \n&lt;&lt;else if $treeNumber &gt; 6&gt;&gt;\nYour small grove of &lt;&lt;$treeNumber&gt;&gt; trees are starting to fill your greenhouse, \n&lt;&lt;else if $treeNumber &gt; 2&gt;&gt;\nYour &lt;&lt;$treeNumber&gt;&gt; trees are in your greenhouse, you're glad to have a couple backups in case one of them dies, \n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $treePower &lt; 3&gt;&gt;\nthe leaves are pretty small but are still green, showing that they're doing their job at helping to boost your oxygen supply.\n&lt;&lt;else if $treePower &gt; 2 and $treePower &lt; 6&gt;&gt;\nthe leaves are pretty healthy looking and even the bark looks sturdy.\n&lt;&lt;else if $treePower &gt; 6&gt;&gt;\nlush leaves and healthy bark would be an understatement. You've never seen such thick growth since you've visited one of those rainforest preserves.\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;else&gt;&gt;\nYou look in the empty greenhouse... completely dead. You hope you'll make it for 30 days with what you have.\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\n&lt;&lt;if $foundenemy is 1&gt;&gt;\s\nSince you've learned of your tree's natual fighting power against the asteroid's current inhabitants, you've been collecting the sap. A pretty unconventional weapon you must admit.\n\nYou currently gathered &lt;&lt;$biotoxin&gt;&gt; tablespoons of the biotoxin. You've applied them to the branch you're using as a makeshift club and some other throwable items. Hopefully you will have enough the next time the aliens attack.\n&lt;&lt;endif&gt;&gt;\n\nAfter checking everything, you're ready to decide what to focus on today.\n\n[[work in the greenhouse|Greenhouse]]\n[[explore the giant asteroid|Exploration]]\n&lt;&lt;if $fungiFound is 1 and $fungiUsed is 0&gt;&gt;\s\n[[Use the fungi!|Use Fungi]]\n&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;endif&gt;&gt;</div><div tiddler="Exploration" tags="coreLoop explore" modified="201504191954" created="201504190219" twine-position="735,429" modifier="twee">&lt;&lt;if $foundenemy is 0&gt;&gt;\s\nWell, you got a good while before the thirty days are up, might as well take some time to explore the giant asteroid you hope to claim. \n\t&lt;&lt;if $days &gt; 1&gt;&gt;\s\nAlthough haven't seen anything out there yet, you get an uneasy feeling. It's probably just the fact you know you're the only person in Sector Z32.\n\t&lt;&lt;endif&gt;&gt;\n[[check around the camp|Early Exploration]]\n&lt;&lt;else&gt;&gt;\s\nYou suit up and go through the depressurization chamber, exiting your base camp. Knowing that you're not alone on this giant asteroid, you grab your supply of your tree's biotoxin sap. \n\t&lt;&lt;if $biotoxin &lt; 10&gt;&gt;\s\nIt's not much, but it seems a little goes a long way against these aliens.\n\t&lt;&lt;else if $biotoxin &lt; 20&gt;&gt;\s\nYou're pretty sure you got plenty to manage a number of those alien creatures.\n\t&lt;&lt;else&gt;&gt;\s\nFeeling confident in how much you have, you're sure you can take on any number of them.\n\t&lt;&lt;endif&gt;&gt;\nTime to explore! Since there isn't any magnetic field on this asteroid, you'll have to go by landmarks on the surface.\n\n[[the giant crater|Crater]]\n[[the mountain range|Mountain]]\n[[the fissure|Fissure]]\n&lt;&lt;endif&gt;&gt;</div><div tiddler="The Journey" tags="intro" modified="201504182050" created="201504181407" twine-position="379,3" modifier="twee">While the ship is being loaded you sent messages to your friends, family and current job. You're pretty sure you'll get fired but if this venture works out, it wouldn't matter anyways.\n\nYou get the signal that your supplies have finished loading onto your craft. A few minutes later you get cleared for pickup.\n\nTaking a deep breath you stare up at the sky as your ship gets attached to the platform, waiting for your ride to come. Out of the blueness a gigantic dark shape starts to form. \n\nYou double check your restraints before seeing the giant mass falling down as it takes up more and more of your vision. Your heartbeat starts to race. \n\nFew things in this solar systerm gives you the same adrenaline rush than being picked up by a space elevator. Being at the pickup point really feels like God's finger is coming out of the sky to crush you until it stops just short and instead lifts you up into the heavens.\n\nThe sky quickly gets blocked out by the mass as your breathing picks up. You remember the many times you and your friends had contests to keep your heartrate as low as you can while watching it, the only time you won was when you were madly drunk.\n\nSuddenly you feel the platform start to lift as the space elevator catches it. You sink partly into your seat as it accelerates up. Moments later the sky darkens and you see the familar sight of the stars.\n\nAfter finally detaching from the platform at the top you engage the autopilot and plug the permit chip into the computer. Getting up you go to main cabin and open the sleep capsule to get in it.\n\nYou relax, listening to the hum of your engines as the capsule closes and works its magic.\n\n[[a peaceful sleep?|A Hard Awakening]]</div><div tiddler="Greenhouse" tags="coreLoop" modified="201504200211" created="201504190220" twine-position="165,393" modifier="twee">&lt;&lt;nobr&gt;&gt;\n&lt;&lt;set $timesGardened +=1&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\nYou decide to take the day to tend to the greenhouse. \n&lt;&lt;if $oxygen/$co2 &lt; 1&gt;&gt;\s\nThe air is already getting problematic to breathe as it is. So getting the oxygen levels up is a priority.\n&lt;&lt;endif&gt;&gt;\n\nYou set out to work on adding more minerals and water to help fortify the artificial medium the trees grow on. \n&lt;&lt;if ($timesGardened % 5 is 4) or (Math.random(1)*15 &gt; 12)&gt;&gt;\s\n\t&lt;&lt;set $treePower += 1&gt;&gt;\s\nBy the end of the day it feels like your luck or persistence has finally paid off as you see the leaves of your instant tree getting larger. \n\t&lt;&lt;if Math.random(1)*4 &gt; 2&gt;&gt;\nOn top of that you got another bonus! The tree also dropped seed and you set out to plant it. At the end of the day it's already growing to another tree.\n&lt;&lt;set $treeNumber += 1&gt;&gt;\s\n\t&lt;&lt;endif&gt;&gt;\n&lt;&lt;else&gt;&gt;\nA lot of work without much visible result... but you know you're making good progress.\n\t&lt;&lt;if Math.random(1)*4 &gt; 3&gt;&gt;\nOh cool! A tree dropped a seed and you make a new spot in the artificial medium to plant and water it. A few hours later, another tree has grown.\n&lt;&lt;set $treeNumber += 1&gt;&gt;\s\n\t&lt;&lt;endif&gt;&gt;\s\n&lt;&lt;endif&gt;&gt;\s\n/% Enemy Encounter %/\n&lt;&lt;if $foundenemy is 0&gt;&gt;\s\nYou find it relaxing doing some garden work. You feel like a 22nd century version of the American frontier settlers you read about in history class. While you weren't expecting to garden at all during this expedition, you found it a great way to pass time.\n\t&lt;&lt;if Math.random(1)*10 &lt; 7&gt;&gt;\n\t[[what's that sound?|First Encounter Greenhouse]]\n\t&lt;&lt;else&gt;&gt;\n\t[[time to call it a day|Camp]]\n\t&lt;&lt;endif&gt;&gt;\n&lt;&lt;else&gt;&gt;\s\nDuring your time gardening you keep a careful watch on your permimeter sensors. You have no knowing when the next time you'll encounter the Z32 aliens.\n\t&lt;&lt;if Math.random(7)*35 &lt; $enemypower*$enemynumber&gt;&gt;\n\t[[an alarm gets tripped!|Greenhouse Battle]]\t\n\t&lt;&lt;else&gt;&gt;\n\t[[not today luckily, time to call it a day|Camp]]\n\t&lt;&lt;endif&gt;&gt;\n&lt;&lt;endif&gt;&gt;</div><div tiddler="Greenhouse Battle" tags="coreLoop battle" modified="201504201757" created="201504191645" twine-position="224,524" modifier="twee">&lt;&lt;nobr&gt;&gt;\n&lt;&lt;if $enemynumber &lt; 2&gt;&gt;&lt;&lt;set $enemynumber = 2&gt;&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;set $enemyAttackNumber = either(1,2,3,$enemynumber)&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\nAs soon as the proximity alarm rings you spring into action. You find yourself &lt;&lt;print either(&quot;\n\nSoon you finally see what it is, confirming that it is them.\n\nYou spot &lt;&lt;$enemynumber&gt;&gt; &lt;&lt;print either(&quot;uncanny humanoids, unmistakably aliens&quot;,&quot;ugly creatures&quot;,&quot;aliens&quot;)&gt;&gt;. \n&lt;&lt;if $enemypower is 1&gt;&gt;\s\nThey look like the one you first encountered. It looks like they haven't learned about your sap.\n&lt;&lt;else if $enemypower is 2&gt;&gt;\s\nThey seem to be wearing something now, some sort of rudimentary clothes. It seems they are figuring out the nature of your weapon.\n&lt;&lt;else if $enemypower &lt; 5&gt;&gt;\s\nThey have come prepared this time and most are covered to try to protect against your biotoxins.\n&lt;&lt;else if $enemypower &gt; 4&gt;&gt;\s\nAfter all the skirmishes they had with you, they are now heavily armored... but thankfully they don't have much for weapons, much less modern ones. You feel like this is probably the best equipment they got.\n&lt;&lt;endif&gt;&gt;\nYou double check your &lt;&lt;print either(&quot;'ammo'&quot;,&quot;amount of biotoxins you have&quot;,&quot;container holding the sap&quot;)&gt;&gt;, you got &lt;&lt;$biotoxin&gt;&gt; tablespoons.\n\nHow should you take them on?\n\n[[Go all out|Battle Result][$ferocity = 3; $greenhouse = 1]]\n[[Skirmish|Battle Result][$ferocity = 2; $greenhouse = 1]]\n[[Defensively|Battle Result][$ferocity = 1; $greenhouse = 1]]</div><div tiddler="StoryAuthor" tags="" modified="201504200238" created="201504181323" twine-position="0,129" modifier="twee">Justin Cox\n@Ammypendent\nLudum Dare 32 Jam\nApril 2015</div></div></body></html>
